<!DOCTYPE html><!-- saved from url=(0054)http://www.cplusplus.com/articles/3u75fsew/default.htm --><meta http-equiv="X-UA-Compatible" content="IE=Edge" />

<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Snake Cpp [Console] - C++ Articles</title>
<link rel="shortcut icon" type="image/x-icon" href="../../favicon.ico">
<link rel="stylesheet" type="text/css" href="../../v321/main.css">
<script src="../../v321/main.js" type="text/javascript"></script>
</head>
<body>
<div id="I_top">
<div id="I_header">
<div id="I_logo"><a href="../../default.htm" title="cplusplus.com"><div></div></a></div>
<div id="I_search">
<form id="search" action="/search.do" method="get">
Search: <input name="q" size="20" class="txt"> <input type="submit" value="Go" class="btn">
</form>
</div>
<div id="I_bar">
<ul>
<li><a href="../default.htm">Articles</a></li>
<li class="here">Snake Cpp [Console]</li>
</ul>
</div>
<div id="I_user" class="C_LoginBox"><span title="ajax"></span></div>
</div>
</div>
<div id="I_mid">
<div id="I_wrap">
<div id="I_minheight"></div>
<div id="I_main">
<div id="I_content">
<div class="C_art">
<div id="I_author">Published by <b><a href="../../user/foxefde/default.htm" rel="author">Foxefde</a></b></div>
<div id="I_date">Aug 23, 2013 (last update: Jan 21, 2014)</div>
<h1>Snake Cpp [Console]</h1>
<div id="I_score">Score: 3.4/5 (210 votes)</div>
<div id="I_stars"><img src="../../ico/16star.png" width="16" height="16" alt="*"><img src="../../ico/16star.png" width="16" height="16" alt="*"><img src="../../ico/16star.png" width="16" height="16" alt="*"><img src="../../ico/16star-empty.png" width="16" height="16" alt="*"><img src="../../ico/16star-empty.png" width="16" height="16" alt="*"></div>
<div id="I_content">
Hey,<br>
<br>
I've decided to share with you my snake game ,I hope you will like it.<br>
I've added some comments to the game as well,if you want to understand how it works.<br>
<br>
Foxefde<br>
<br>
<br>
<div class="auto"><table class="snippet"><tr><td class="rownum"><pre><code>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>30<br>31<br>32<br>33<br>34<br>35<br>36<br>37<br>38<br>39<br>40<br>41<br>42<br>43<br>44<br>45<br>46<br>47<br>48<br>49<br>50<br>51<br>52<br>53<br>54<br>55<br>56<br>57<br>58<br>59<br>60<br>61<br>62<br>63<br>64<br>65<br>66<br>67<br>68<br>69<br>70<br>71<br>72<br>73<br>74<br>75<br>76<br>77<br>78<br>79<br>80<br>81<br>82<br>83<br>84<br>85<br>86<br>87<br>88<br>89<br>90<br>91<br>92<br>93<br>94<br>95<br>96<br>97<br>98<br>99<br>100<br>101<br>102<br>103<br>104<br>105<br>106<br>107<br>108<br>109<br>110<br>111<br>112<br>113<br>114<br>115<br>116<br>117<br>118<br>119<br>120<br>121<br>122<br>123<br>124<br>125<br>126<br>127<br>128<br>129<br>130<br>131<br>132<br>133<br>134<br>135<br>136<br>137<br>138<br>139<br>140<br>141<br>142<br>143<br>144<br>145<br>146<br>147<br>148<br>149<br>150<br>151<br>152<br>153<br>154<br>155<br>156<br>157<br>158<br>159<br>160<br>161<br>162<br>163<br>164<br>165<br>166<br>167<br>168<br>169<br>170<br>171<br>172<br>173<br>174<br>175<br>176<br>177<br>178<br>179<br>180<br>181<br>182<br>183<br>184<br>185<br>186<br>187<br>188<br>189<br>190<br>191<br>192<br>193<br>194<br>195<br>196<br>197<br>198<br>199<br>200<br>201<br>202<br>203<br>204<br>205<br>206<br>207<br>208<br>209<br>210<br>211<br>212<br>213<br>214<br>215<br>216<br>217<br>218<br>219<br>220<br>221<br>222<br>223<br>224<br>225<br>226<br>227<br>228<br>229<br>230<br>231<br>232<br>233<br>234<br>235<br>236<br>237<br>238<br>239<br>240<br>241<br>242<br>243<br>244<br>245<br>246<br>247<br>248<br>249<br>250<br>251<br>252<br>253<br>254<br>255<br>256<br>257<br>258<br>259<br>260<br>261<br>262<br>263<br>264<br>265<br>266<br>267<br>268<br>269<br>270<br>271<br>272<br>273<br>274<br>275<br>276<br>277<br>278<br>279<br>280<br>281<br>282<br>283<br>284<br>285<br>286<br>287<br>288<br>289<br>290<br>291<br>292<br>293<br>294<br>295<br>296<br>297<br>298<br>299<br>300<br>301<br>302<br>303<br>304<br>305<br>306<br>307<br>308<br>309<br>310<br>311<br>312<br>313<br>314<br>315<br>316<br>317<br>318<br>319<br>320<br>321<br>322<br>323<br>324<br>325<br>326<br>327<br>328<br>329<br>330<br>331<br>332<br>333<br></code></pre></td>
<td class="source"><pre><code>
<dfn>#include &lt;vector&gt;</dfn>
<dfn>#include &lt;iostream&gt;</dfn>
<dfn>#include &lt;conio.h&gt; </dfn><cite>//By Foxefde</cite>
<dfn>#include &lt;windows.h&gt;</dfn>
<dfn>#include &lt;ctime&gt;</dfn>

<var>class</var> Snake
{
<var>private</var>:
    <var>int</var> x,z,Dollars,y,Bonus,time,tail;
    <cite>// x - snake head position</cite>
    <cite>// z = for random number(pineapple generation)</cite>
    <cite>// y = tail coordinates time = time tail = snakelenght - 1</cite>
    <var>char</var> *map; <cite>//Map of game</cite>
    <var>bool</var> L,R,D,U,A; <cite>//L = LEFT R = RIGHT D = DOWN U = UP A = JUST A BOOL</cite>
    std::vector &lt;<var>int</var>&gt; past; <cite>//Special vector for deleting old parts</cite>

<var>public</var>:
    Snake()
    {
        map = <var>new</var> <var>char</var> [2000];
        L = 0;
        R = 1; <cite>//bool 1 = true bool 0 = false</cite>
        D = 0;
        U = 0;
        A = 0;
        tail = 1; <cite>//Actually it will not have a tail until it eats first apple</cite>
        x = 1000; <cite>//Position of snake at the beggining</cite>
        Dollars = 0; <cite>//Money</cite>
        Bonus = 0;
        time = 40; <cite>//For bonus apples</cite>
        z = 1; <cite>//So first apple generation will not be bugged --</cite>
	}

    ~Snake()
    {
        <var>delete</var> [] map;
    }

    <var>void</var> Graphics (); <cite>//Drawing game</cite>
    <var>void</var> GameLogic(); <cite>//Does it need comment?</cite>
    <var>void</var> KEYBOARD (); <cite>//Checking for input</cite>
    <var>void</var> Pineapple(); <cite>//Generating new apple</cite>
    <var>int</var> GameOver (); <cite>//Game over ?.</cite>
    <var>void</var> Start(); <cite>//Start -_-</cite>
    <var>friend</var> <var>void</var> clearscreen(); <cite>//It's actually not like system("cls"),but works almost same</cite>
    <var>friend</var> <var>void</var> sp();<cite>//Choose color function</cite>
    <var>friend</var> <var>void</var> s(); <cite>//Forget choose color choice</cite>
};
<cite>////////////////////////////////////////////////////////////////////////////////// Windows</cite>
<var>void</var> clearscreen()
{
    HANDLE hOut;
    COORD Position;

    hOut = GetStdHandle(STD_OUTPUT_HANDLE);

    Position.X = 0;
    Position.Y = 0;
    SetConsoleCursorPosition(hOut, Position);
}

<var>void</var> sp(<var>int</var> choosecolor)
{
    SetConsoleTextAttribute(GetStdHandle(STD_OUTPUT_HANDLE), choosecolor); <cite>//FUNCTION OF COLOR</cite>
}
<var>void</var> s()
{
    SetConsoleTextAttribute(GetStdHandle(STD_OUTPUT_HANDLE), 7);
    <cite>//FUNCTION TO ..EHM FORGET COLOR,not sure how to say I know: Stop using color</cite>
}
<cite>////////////////////////////////////////////////////////////////////////////////// ^ Windows</cite>
<var>void</var> Snake::Start()
{
    <var>for</var>(<var>int</var> p = 0;p &lt; 2000;p++)<cite>//////////////////////////////////////// Making array empty</cite>
    {
        map[p] = <kbd>' '</kbd>;
    }

    map[ x ] = <var>char</var>(219); <cite>//Let's make head - block</cite>
    Pineapple(); <cite>//Let's generate a pineapple</cite>
    Graphics(); <cite>//GOOOOOOO</cite>
}
<cite>//////////////////////////////////////////////////////////////////////////////////////////</cite>
<var>int</var> Snake::GameOver()
{
    Sleep(2500);
    system(<kbd>"cls"</kbd>);
    std::cout &lt;&lt;     std::endl &lt;&lt; <kbd>"Oops...You earned "</kbd> &lt;&lt; Dollars + Bonus &lt;&lt; <kbd>" Dollars..."</kbd>;
    <cite>//Better luck next time.</cite>
    Sleep(1800);
    <var>return</var> 0;
}
<var>void</var> Snake::Graphics()
{
    sp(697); <cite>//CHoosing color</cite>
    std::cout &lt;&lt; Dollars + Bonus &lt;&lt; <kbd>" Dollars By Foxefde 2013 "</kbd>;
    std::cout &lt;&lt; <kbd>"\n"</kbd>;
    s();
    <var>for</var>(<var>int</var> u = 0;u &lt; 50;u++) <cite>//Top border</cite>
    {
        sp(750);
        std::cout &lt;&lt; <var>char</var>(219);
        s();
    }

	std::cout &lt;&lt;     std::endl;
<cite>/***********************************************************************/</cite>
    <var>for</var>(<var>int</var> x1 = 0;x1 &lt; 2000 ; x1++) <cite>//DRAWING BOARD!~</cite>
    {
        <var>if</var>(x1 % 50 == 0 &amp;&amp; x1 != 0)
        {
            std::cout &lt;&lt;     std::endl;
        }
        <var>if</var>(x1 % 50 == 0 || (x1-(x1 / 50)) % 49 == 0)
		{
            map[x1] = <var>char</var>(219);
            sp(750);
            std::cout &lt;&lt; map[x1];
            s();
		}
	<var>else</var> <var>if</var>(map[x1]!=<var>char</var>(219) &amp;&amp; map[x1]!=map[z])
    {
        std::cout &lt;&lt; map[x1];
    }
    <var>else</var> <var>if</var>(x1 == z)
    {
        sp(10);
        std::cout &lt;&lt; map[x1];
        s();
    }
    <var>else</var>
    {
        sp(750);
        std::cout &lt;&lt; map[x1];
        s();
	}

    }

	std::cout &lt;&lt;     std::endl; <cite>//New line</cite>
<cite>/***********************************************************************/</cite>
    <var>for</var>(<var>int</var> u = 0;u &lt; 50;u++) <cite>//Bottom border</cite>
    {
        sp(750);
        std::cout &lt;&lt; <var>char</var>(219);
        s();
    }
    <var>if</var>(U == 1 || D == 1)
	{ <cite>//WITHOUT IT ,GOING UP/DOWN IS MUCH FASTER THAN &lt; &gt;</cite>
        Sleep(19);
    }
    <var>if</var>(map[z] == <var>char</var>(5)) <cite>//If apple is bonus ,then start decreasing time to get it!</cite>
    {
        time--;
        <var>if</var>(time == 0) <cite>//If you were too slow ,you lose a dollar and a new apple is generated</cite>
		{
            Dollars++;
            time = 40;
            Pineapple();
        }
    }

    clearscreen();
    GameLogic();
}

<var>void</var> Snake::Pineapple()
{
    map[z] = <kbd>' '</kbd>;
    <var>if</var>(Dollars % 8 != 0 || Dollars == 0)
    <cite>//Bonus apple - every 8 normal apples eaten ,so we need to check - generate an apple or a bonus apple</cite>
    {
        <var>while</var>(map[z] != <kbd>' '</kbd> &amp;&amp; z % 50 != 0 &amp;&amp; (z-(z/50)) % 49!= 0);
    <cite>//Keep generating new coordinates of pineapple until that place is empty</cite>
        {
            z = rand()%2000 + 1;
		}

	    map[z] = <var>char</var>(229);
        <cite>//(z(z/50)) % 49 != 0 that means ,if z isn't 49+50n (49,99,149,199...)</cite>
    } <cite>//Logic ftw ,yeh?:D</cite>

    <var>else</var> <cite>//BONUS APPLE</cite>
    {
        <var>while</var>(map[z] != <kbd>' '</kbd> &amp;&amp; z % 50 != 0 &amp;&amp; (z-(z/50)) % 49 != 0);
        <cite>//Keep generating new coordinates of pineapple until that place is empty</cite>
        {
            z = rand()%2000 + 1;
        }
        map[z] = <var>char</var>(5);
    }

}

<var>void</var> Snake::KEYBOARD()
{
<cite>/***********************************************************************************************/</cite>
<var>if</var>(_kbhit()) <cite>//If player clicks something</cite>

{
    <var>char</var> key;
    key = _getch(); <cite>//Now this click is key</cite>
    <var>switch</var>( key )
    {
        <var>case</var> <kbd>'d'</kbd>:
            <cite>//cases below,nothing special ,you should understand that easily</cite>
            <cite>//,but let me give a simple explanation of first case:</cite>
        {
            <var>if</var> (L == 0) <cite>//So if a player has clicked 'd' ,then.1:We check if snake is not</cite>
            <cite>//going left,because how can she turn right,if she's going left?Teleporting?..</cite>
            {
                L = 0, U = 0, D = 0, <cite>//Left = false UP = false Down = false</cite>
                R = 1; <cite>//Right = true !</cite>
			}
            <var>break</var>; <cite>//We break it,end of the case.Identic with other cases..</cite>
        }

        <var>case</var> <kbd>'w'</kbd>:
        {
            <var>if</var> (D == 0)
            {
                L = 0, D = 0, R = 0,
                U = 1;
            }
        <var>break</var>;
        }

        <var>case</var> <kbd>'a'</kbd>:
        {
            <var>if</var> (R == 0)
            {
                D = 0, U = 0, R = 0,
                L = 1;
			}
        <var>break</var>;
        }

        <var>case</var> <kbd>'s'</kbd>:
        {
            <var>if</var> (U == 0)
            {
                L = 0, U = 0, R = 0,
                D = 1;
            }
        <var>break</var>;
        }

    }

}
}

<cite>/**************************************************************************/</cite>
<var>void</var> Snake::GameLogic()
{
    past.insert(past.begin(),x); <cite>//Inserting past x position to vector</cite>
    KEYBOARD();
    <var>if</var>(R == 1) <cite>//If snake is going right</cite>
    {
        x++;
    }
    <var>else</var> <var>if</var>(L == 1) <cite>//If snake is going left</cite>
    {
        x--;
    }
    <var>else</var> <var>if</var>(U == 1) <cite>//If snake is going up</cite>
    {
        x-= 50;
    }
    <var>else</var> <cite>//If snake is going down(only case left)</cite>
    {
        x+= 50;
    }
    <var>if</var>(map[ x ] == <var>char</var>(219) || x % 50 == 0 || x &gt; 2000 || x &lt; 0 || (x-(x / 50)) % 49 == 0)
        <cite>//If it hits herself or border...</cite>
    {
        GameOver();
        <var>return</var>;
    }
    <var>if</var>(map[x] == <var>char</var>(229))
    <cite>//If it eats an pineapple also A becomes true,that means the</cite>
    <cite>//very end of the snake(tail) will not be deleted ( line 276 ) for 1 frame</cite>
    {
        A = <var>true</var>;
        tail++; <cite>//It eats a big apple ,so snake becomes heavier</cite>
        Pineapple(); <cite>//Let's generate new apple!</cite>
        Dollars++; <cite>//Apple had some dollars in it,congrulations!</cite>
	}
    <var>else</var> <var>if</var> (map[x] == <var>char</var>(5)) <cite>//Same,but maybe it has just eaten bonus apple?</cite>
    {
        A = <var>true</var>;
        tail++;
        Pineapple();
        Bonus+=time;
    }

    map[x] = <var>char</var>(219);
    <cite>//When it touches apple - head becomes an apple,so we need to change it.</cite>
<cite>/**********/</cite>
    <var>if</var>(A == <var>false</var>) <cite>//If snake has just eaten an apple</cite>
    {
        y = past[past.size() - tail]; <cite>//D E L E T I N G past tail from the map!</cite>
        map[y] = <kbd>' '</kbd>;
    }

    A = <var>false</var>; <cite>//So the next time line 270 will work again,if apple is no eaten ///</cite>
    <var>if</var>(tail!=1)
    {
        <var>for</var>(<var>int</var> u = past.size() - 2;u &gt; 0;u--)
		{
            past[u+1] = past[u];
        } <cite>//Try your best to understand what's happening here,</cite>
        <cite>//let's say this is an exercise for you from Foxefde</cite>
    past.erase(past.end()-tail);
    }
    <var>else</var>
    {
        past.erase(past.begin()); <cite>//I could do it without erases,</cite>
    } <cite>//</cite>
    Graphics();
}
<var>int</var> main()
{
    srand((<var>unsigned</var>)time(0)); <cite>//So random numbers will be always random.</cite>
    Snake SNAKE; <cite>//creating class m</cite>
    SNAKE.Start(); <cite>//Starting main function/</cite>
}
<cite>//By Foxefde 2013 www.youtube.com/watch?v=DBOzkCbdoqQ</cite>
<cite>//Also check this www.youtube.com/watch?v=JkEHImooH74</cite>
<cite>//Skype Mantasxxl3</cite>
</code></pre></td><td class="C_btnholder"></td></tr></table></div>
</div></div><div id="CH_bb"></div><div id="CH_scoreapp"></div><script type="text/javascript">new Score('CH_scoreapp','../score.cgi','3U75fSEw');</script></div>
</div>
<div id="I_nav">
<div class="sect root">
<h3><b><a href="../../default.htm">C++</a></b></h3>
<ul>
<li class="folder info"><a href="../../info/default.htm">Information</a></li>
<li class="folder doc"><a href="../../doc/default.htm">Tutorials</a></li>
<li class="folder reference"><a href="../../reference/default.htm">Reference</a></li>
<li class="folder selected articles"><a href="../default.htm">Articles</a></li>
<li class="folder forum"><a href="../../forum/default.htm">Forum</a></li>
</ul>
</div>
<div class="sect">
<h3><b><a href="../default.htm">Articles</a></b></h3>
<ul>
<li><a href="../algorithms/default.htm">Algorithms</a></li><li><a href="../cpp11/default.htm">C++ 11</a></li><li><a href="../graphics/default.htm">Graphics and multimedia</a></li><li><a href="../howto/default.htm">How-To</a></li><li><a href="../language/default.htm">Language Features</a></li><li><a href="../linux/default.htm">Unix/Linux programming</a></li><li><a href="../sourcecode/default.htm">Source Code</a></li><li><a href="../standard_library/default.htm">Standard Library</a></li><li><a href="../tips/default.htm">Tips and Tricks</a></li><li><a href="../tools/default.htm">Tools and Libraries</a></li><li><a href="../visualcpp/default.htm">Visual C++</a></li><li><a href="../winapi/default.htm">Windows API</a></li></ul>
</div>
<div id="I_subnav"></div>
</div>
<div id="I_midclear"></div>
</div>
</div>
<div id="I_bottom">
<div id="I_footer">
	<a href="../../default.htm">Home page</a> | <a href="../../privacy.do.htm">Privacy policy</a><br>&copy; cplusplus.com, 2000-2014 - All rights reserved - <i>v3.1</i><br><a href="../../contact.doreferrerwww.cplusplus~66.com_">Spotted an error? contact us</a>
</div>
</div>

<script type="text/javascript">
<!--
onSession(function(us) {
		document.getElementById('I_subnav').innerHTML=
			us.ok?
				'<div class="sect"><h3><b><a href="../../user/default.htm">'+us.user+'</a></b></h3><ul>'+
				'<li><a href="../myitems.cgi.htm">My items</a></li>'+
				(us.auth(32768)?'<li><a href="../adminitems.cgi.htm">Admin items</a></li>':'')+
				'</ul></div>'
			:'';
	}); onSession(function (us) {
		var el=document.getElementById('CH_bb'); el.innerHTML='';
		if ( (us.auth(32768)) || ((us.uniqid=='LAkz8vqX')&&(us.auth(128))) ) {
			el.appendChild(btn('Edit article','Edit this version of the article','edit','../edit.cgia3u75fsew'));
	
			if (us.auth(32768)) {
				el.appendChild(btn('Delete article','Delete this article','delete','javascript:artdel()'));
			}
	
		}
	});
	function artdel() { if (confirm('WARNING: You are about to delete this page. Confirm?')) window.location='../delete.cgia3u75fsew'; }
	ready();
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-521783-1']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? '../../../httpsssl/default.htm' : '../../../www/default.htm') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();

//-->
</script>

</body>
</html>