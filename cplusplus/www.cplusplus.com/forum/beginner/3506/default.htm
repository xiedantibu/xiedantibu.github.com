<!DOCTYPE html><!-- saved from url=(0056)http://www.cplusplus.com/forum/beginner/3506/default.htm --><meta http-equiv="X-UA-Compatible" content="IE=Edge" />

<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>How to calc offset and read header binar - C++ Forum</title>
<link rel="shortcut icon" type="image/x-icon" href="../../../favicon.ico">
<link rel="stylesheet" type="text/css" href="../../../v321/main.css">
<script src="../../../v321/main.js" type="text/javascript"></script>
</head>
<body>
<div id="I_top">
<div id="I_header">
<div id="I_logo"><a href="../../../default.htm" title="cplusplus.com"><div></div></a></div>
<div id="I_search">
<form id="search" action="/search.do" method="get">
Search: <input name="q" size="20" class="txt"> <input type="submit" value="Go" class="btn">
</form>
</div>
<div id="I_bar">
<ul>
<li><a href="../../default.htm">Forum</a></li>
<li><a href="../default.htm">Beginners</a></li>
<li class="here">How to calc offset and read header binar</li>
</ul>
</div>
<div id="I_user" class="C_LoginBox"><span title="ajax"></span></div>
</div>
</div>
<div id="I_mid">
<div id="I_wrap">
<div id="I_minheight"></div>
<div id="I_main">
<div class="C_support"><script type="text/javascript"><!--
if (!cookieGet("hspt31")) {
  document.write('<div class="C_DonateBox"></div>');
}
//-->
</script><div class="C_ad728"><script type="text/javascript"><!--
google_ad_client = "ca-pub-7688470879129516";
google_ad_slot = "7973859818";
google_ad_width = 728;
google_ad_height = 90;
//-->
</script>
<acript type="text/javascript"
src="../../../../pagead2.googlesyndication.com/pagead/show_ads.js">
</script></div><div class="C_supportbottom"></div></div><div id="I_content">
<h3><div class="C_ico default" title="post">&nbsp;</div> How to calc offset and read header binary?</h3><span id="CH_edttl"></span><span class="rootdatPost" title="3506,root,0,-1,15,0"></span><div id="CH_PostList"><div class="C_forPost" id="msg14762"><span title="14762,11884,1023,78,1"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg14762" title="Link to this post"><img src="../../../img/link.png" width="16" height="8"></a> <span id="CH_zTm60e666e73e" title="Tue, 12 Aug 2008 12:55:44 +0000"></span><script type="text/javascript">WhenId('CH_zTm60e666e73e');</script><noscript>Aug 12, 2008 at 12:55pm UTC</noscript></div>
<div class="dwho"><a href="../../../user/quant/default.htm"><b>quant</b> (78)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i14762">
I have binary image file gif format. How to simpless to take width &amp; height my image? I try get it next, but unsuccesful.<br>
<div class="auto"><table class="snippet"><tr><td class="rownum"><pre><code>1<br>2<br>3<br>4<br>5<br>6<br></code></pre></td>
<td class="source"><pre><code>					lseek(Data, 0x6, SEEK_SET); 
					read(Data, &amp;Height, <var>sizeof</var>(Height)); 
					lseek(Data, 0x8, SEEK_SET); 
					read(Data, &amp;Width, <var>sizeof</var>(Width)); 
					printf(<kbd>"Height: %d\r\n"</kbd>, Height); 
					printf(<kbd>"Width: %d\r\n"</kbd>, Width); </code></pre></td><td class="C_btnholder"></td></tr></table></div>
<br>
Hex address 0x6 &amp; 0x8 keeping value height &amp; wight in according.<br>

</div>
<div class="dhow">
<span class="dbtn" id="CH_btn14762"></span>

</div>
</div>
</div>
<div class="C_forPost" id="msg14768"><span title="14768,13171,1023,11788,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg14768" title="Link to this post"><img src="../../../img/link.png" width="16" height="8"></a> <span id="CH_zTm752f9fbd4b" title="Tue, 12 Aug 2008 13:36:08 +0000"></span><script type="text/javascript">WhenId('CH_zTm752f9fbd4b');</script><noscript>Aug 12, 2008 at 1:36pm UTC</noscript></div>
<div class="dwho"><a href="../../../user/helios/default.htm"><b>helios</b> (11788)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i14768">
I don't understand the question. Are you getting absurd numbers? You might have an endianness problem.<br>
And what's lseek, anyway?
</div>
<div class="dhow">
<span class="dbtn" id="CH_btn14768"></span>

</div>
</div>
</div>
<div class="C_forPost" id="msg14774"><span title="14774,9110,5119,8826,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg14774" title="Link to this post"><img src="../../../img/link.png" width="16" height="8"></a> <span id="CH_zTm95d186eece" title="Tue, 12 Aug 2008 14:06:09 +0000"></span><script type="text/javascript">WhenId('CH_zTm95d186eece');</script><noscript>Aug 12, 2008 at 2:06pm UTC</noscript></div>
<div class="dwho"><a href="../../../user/duoas/default.htm"><b>Duoas</b> (8826)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i14774">
If you haven't any clue what he is talking about then why post a reply?<br>
<br>
The logical screen <i>width</i> is at offset 6, and the screen <i>height</i> is at offset 8.<br>
<br>
You should be decoding it rather than relying on the machine size of any integer value:<br>
<div class="auto"><table class="snippet"><tr><td class="rownum"><pre><code>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br></code></pre></td>
<td class="source"><pre><code>  <var>unsigned</var> <var>char</var> buf[ 4 ];
  ...
  lseek( Data, 6, SEEK_SET );
  read( Data, buf, 4 );
  Width  = buf[ 0 ] +(buf[ 1 ] &lt;&lt; 8);
  Height = buf[ 2 ] +(buf[ 3 ] &lt;&lt; 8);
  printf( <kbd>"Height: %d\r\n"</kbd>, Height );
  printf( <kbd>"Width: %d\r\n"</kbd>, Width );</code></pre></td><td class="C_btnholder"></td></tr></table></div>
<br>
I'm not sure why you are putting that carriage return in the output though...<br>
<br>
Hope this helps.
</div>
<div class="dhow">
<span class="dbtn" id="CH_btn14774"></span>

</div>
</div>
</div>
<div class="C_forPost" id="msg14776"><span title="14776,13171,1023,11788,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg14776" title="Link to this post"><img src="../../../img/link.png" width="16" height="8"></a> <span id="CH_zTm13c313b336" title="Tue, 12 Aug 2008 14:47:51 +0000"></span><script type="text/javascript">WhenId('CH_zTm13c313b336');</script><noscript>Aug 12, 2008 at 2:47pm UTC</noscript></div>
<div class="dwho"><a href="../../../user/helios/default.htm"><b>helios</b> (11788)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i14776">
I don't understand him because he doesn't make himself clear, not because I don't know what the problem might be, smarty pants.<br>
I was trying to obtain more information to provide a better answer.<br>
"What's the simplest way of getting the height and width of an image"? Should I have said "getting it"?<br>
If he had said "the real values are x and y but I'm getting a and b" it'd be a different story, but there are so many ways something can be "unsuccessful" he might as well not say anything.
</div>
<div class="dhow">
<span class="dbtn" id="CH_btn14776"></span>

</div>
</div>
</div>
<div class="C_forPost" id="msg14783"><span title="14783,9110,5119,8826,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg14783" title="Link to this post"><img src="../../../img/link.png" width="16" height="8"></a> <span id="CH_zTm89becf974c" title="Tue, 12 Aug 2008 18:14:18 +0000"></span><script type="text/javascript">WhenId('CH_zTm89becf974c');</script><noscript>Aug 12, 2008 at 6:14pm UTC</noscript></div>
<div class="dwho"><a href="../../../user/duoas/default.htm"><b>Duoas</b> (8826)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i14783">
He made himself perfectly clear: he stated what he is trying to do, the data he is trying to do it on, provided the exact code he is trying to it with, and the exact problem he is having with it. That's a perfect question by any standard.<br>
<br>
If you are just going to acerbically attack everything that hits you the wrong way <i>I'm</i> going to start complaining to the site administrator.<br>
<br>
Oh, and double-talk self-rationalizations doesn't impress me much.
</div>
<div class="dhow">
<span class="dbtn" id="CH_btn14783"></span>

</div>
</div>
</div>
<div class="C_forPost" id="msg14817"><span title="14817,13171,1023,11788,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg14817" title="Link to this post"><img src="../../../img/link.png" width="16" height="8"></a> <span id="CH_zTmd0ba0a961c" title="Tue, 12 Aug 2008 22:42:52 +0000"></span><script type="text/javascript">WhenId('CH_zTmd0ba0a961c');</script><noscript>Aug 12, 2008 at 10:42pm UTC</noscript></div>
<div class="dwho"><a href="../../../user/helios/default.htm"><b>helios</b> (11788)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i14817">
For the love of God, are you serious?<br>
So, to you, "unsuccessful" is an "exact problem"?<br>
<br>
"Acerbically attack"? I'll use your logic on yourself. If there was any chance that I would react, why bother saying anything at all? Why not just answer his question and leave it at that? No. You needlessly made a remark about me. I might have overreacted (I hardly consider that overreacting, but what the hell), but that's my temperament. Who the **** are you to criticize it?<br>
<br>
You know what? Go. Go complain to the admin, *******. I already know the Post Count Rule will apply, but what do I care? <b>**** YOU.</b>
</div>
<div class="dhow">
<span class="sedited">Last edited on <span id="CH_zTmf630547b67" title="Wed, 13 Aug 2008 09:44:43 +0000"></span><script type="text/javascript">WhenId('CH_zTmf630547b67');</script><noscript>Aug 13, 2008 at 9:44am UTC</noscript> by admin</span>
<span class="dbtn" id="CH_btn14817"></span>

</div>
</div>
</div>
<div class="C_forPost" id="msg14867"><span title="14867,1,65535,13,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg14867" title="Link to this post"><img src="../../../img/link.png" width="16" height="8"></a> <span id="CH_zTmf5a99d7bb1" title="Wed, 13 Aug 2008 09:45:02 +0000"></span><script type="text/javascript">WhenId('CH_zTmf5a99d7bb1');</script><noscript>Aug 13, 2008 at 9:45am UTC</noscript></div>
<div class="dwho"><a href="../../../user/admin/default.htm"><b>admin</b> (13)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i14867">
Please, stick to the topic.
</div>
<div class="dhow">
<span class="dbtn" id="CH_btn14867"></span>

</div>
</div>
</div>
<div class="C_forPost" id="msg14979"><span title="14979,11884,1023,78,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg14979" title="Link to this post"><img src="../../../img/link.png" width="16" height="8"></a> <span id="CH_zTm61035383bb" title="Thu, 14 Aug 2008 05:22:10 +0000"></span><script type="text/javascript">WhenId('CH_zTm61035383bb');</script><noscript>Aug 14, 2008 at 5:22am UTC</noscript></div>
<div class="dwho"><a href="../../../user/quant/default.htm"><b>quant</b> (78)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i14979">
helios, be cool and to follow smb.'s example from Duoas. <br>
Duoas, thank for your answer.  <br>
I take next error to use your sample..<br>
error: subscripted value is neither array nor pointer<br>
on this row<br>
Width  = buf[ 0 ] + (buf[ 1 ] &lt;&lt; 8);<br>
<br>
A lot of about this...<br>
I want take dec value from specify hex address into binary file.
</div>
<div class="dhow">
<span class="dbtn" id="CH_btn14979"></span>

</div>
</div>
</div>
<div class="C_forPost" id="msg15002"><span title="15002,9110,5119,8826,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg15002" title="Link to this post"><img src="../../../img/link.png" width="16" height="8"></a> <span id="CH_zTm27ca48b2b3" title="Thu, 14 Aug 2008 12:16:49 +0000"></span><script type="text/javascript">WhenId('CH_zTm27ca48b2b3');</script><noscript>Aug 14, 2008 at 12:16pm UTC</noscript></div>
<div class="dwho"><a href="../../../user/duoas/default.htm"><b>Duoas</b> (8826)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i15002">
If you don't declare <b>buf</b> as either an array (as I did on line 1) or as a pointer then you cannot use the [] operator (subscript operator) on it.<br>
<br>
The only difference between decimal and hexadecimal is how it is <i>written</i> for us humans. 0xA and 10 are both the same number to the computer (and in reality).<br>
<br>
Use <b>scanf</b>() to read a hex representation into an integer variable:<br>
<div class="auto"><table class="snippet"><tr><td class="rownum"><pre><code>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br></code></pre></td>
<td class="source"><pre><code><dfn>#include &lt;stdio.h&gt;</dfn>

<var>int</var> main()
  {
  <var>unsigned</var> <var>int</var> n;

  printf( <kbd>"Please enter a number in hexadecimal&gt; "</kbd> );
  <var>while</var> (scanf( <kbd>"%x"</kbd>, &amp;n ) != 1)
    {
    printf( <kbd>"What? Try again&gt; "</kbd> );
    scanf( <kbd>"%*s\n"</kbd> );
    }
  printf( <kbd>"That number in decimal is %d\n"</kbd>, n );

  <var>return</var> 0;
  }</code></pre></td><td class="C_btnholder"></td></tr></table></div>
<br>
<table class="quote"><tr><td class="qd"><tt>D:\prog\cc\foo&gt; <b>a</b><br>
Please enter a number in hexadecimal&gt; <b>xyz</b><br>
What? Try again&gt; <b>./;</b><br>
What? Try again&gt; <b>a</b><br>
That number in decimal is 10<br>
<br>
D:\prog\cc\foo&gt;<br>
</tt></td></tr></table><br>
<br>
Hope this helps.
</div>
<div class="dhow">
<span class="dbtn" id="CH_btn15002"></span>

</div>
</div>
</div>
<div class="C_forPost" id="msg15181"><span title="15181,11884,1023,78,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg15181" title="Link to this post"><img src="../../../img/link.png" width="16" height="8"></a> <span id="CH_zTmf956d055fb" title="Fri, 15 Aug 2008 15:26:59 +0000"></span><script type="text/javascript">WhenId('CH_zTmf956d055fb');</script><noscript>Aug 15, 2008 at 3:26pm UTC</noscript></div>
<div class="dwho"><a href="../../../user/quant/default.htm"><b>quant</b> (78)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i15181">
thanks!<br>
But, how to send buf[ 0 ] + (buf[ 1 ] &lt;&lt; 8) to getchar()?<br>
<br>
<div class="auto"><table class="snippet"><tr><td class="rownum"><pre><code>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br></code></pre></td>
<td class="source"><pre><code><var>int</var> hex() {
  <var>unsigned</var> <var>int</var> n;
  <var>while</var> ((n = getchar()) != 1)
    <var>return</var> (n);
    }
<var>int</var> main (<var>int</var> Wh){
<var>char</var> Data;
<var>int</var> *buf
<var>int</var> *Width;
...etc..
					read( Data, buf, 4 );
printf (<kbd>"step2\n"</kbd>);
					*Width = buf[ 0 ] + (buf[ 1 ] &lt;&lt; 8);
printf (<kbd>"step3\n"</kbd>);
					Wh = hex(Width);
...etc...
}</code></pre></td><td class="C_btnholder"></td></tr></table></div>
<br>
valgrind<br>
<div class="auto"><table class="snippet"><tr><td class="rownum"><pre><code>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br></code></pre></td>
<td class="source"><pre><code>step1
==8868==
==8868== Syscall param read(buf) contains uninitialised byte(s)
==8868==    at 0x3D3E0C2A10: __read_nocancel (in /lib64/libc-2.6.so)
==8868==    by 0x4008D7: main (in /usr/src/src)
==8868== Warning: invalid file descriptor -16776672 in syscall read()
==8868==    at 0x3D3E0C2A10: __read_nocancel (in /lib64/libc-2.6.so)
==8868==    by 0x4008D7: main (in /usr/src/src)
step2
==8868==
==8868== Use of uninitialised value of size 8
==8868==    at 0x4008EA: main (in /usr/src/src)
==8868==
==8868== Use of uninitialised value of size 8
==8868==    at 0x4008F8: main (in /usr/src/src)
==8868==
==8868== Use of uninitialised value of size 8
==8868==    at 0x400909: main (in /usr/src/src)
==8868==
==8868== Process terminating with <var>default</var> action of signal 11 (SIGSEGV)
==8868==  Bad permissions <var>for</var> mapped region at address 0x4012A0
==8868==    at 0x400909: main (in /usr/src/src)
--8868-- REDIR: 0x3D3E073A90 (free) redirected to 0x4A05524 (free)
--8868-- REDIR: 0x3D3E078440 (memset) redirected to 0x4A06A20 (memset)</code></pre></td><td class="C_btnholder"></td></tr></table></div>

</div>
<div class="dhow">
<span class="sedited">Last edited on <span id="CH_zTm199e06cb6b" title="Fri, 15 Aug 2008 15:29:28 +0000"></span><script type="text/javascript">WhenId('CH_zTm199e06cb6b');</script><noscript>Aug 15, 2008 at 3:29pm UTC</noscript></span>
<span class="dbtn" id="CH_btn15181"></span>

</div>
</div>
</div>
<div class="C_forPost" id="msg15183"><span title="15183,9110,5119,8826,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg15183" title="Link to this post"><img src="../../../img/link.png" width="16" height="8"></a> <span id="CH_zTmf626fc1227" title="Fri, 15 Aug 2008 16:28:12 +0000"></span><script type="text/javascript">WhenId('CH_zTmf626fc1227');</script><noscript>Aug 15, 2008 at 4:28pm UTC</noscript></div>
<div class="dwho"><a href="../../../user/duoas/default.htm"><b>Duoas</b> (8826)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i15183">
It looks to me like you never initialized <b>Data</b>, <b>buf</b>, nor <b>Width</b>.<br>
<br>
You must open a file (and get its file descriptor) before you can <b>read</b>() it.<br>
<div class="auto"><table class="snippet"><tr><td class="rownum"><pre><code>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br></code></pre></td>
<td class="source"><pre><code><dfn>#include &lt;sys/types.h&gt;</dfn>
<dfn>#include &lt;sys/stat.h&gt;</dfn>
<dfn>#include &lt;fcntl.h&gt;</dfn>
...

<var>int</var> Data;
...

Data = open( <kbd>"fooey.gif"</kbd>, O_RDONLY );
<var>if</var> (Data &lt; 0) 
  {
  fprintf( stderr, <kbd>"Failure to open \"%s\"\n"</kbd>, <kbd>"fooey.gif"</kbd> );
  <var>return</var> 1;
  }
...</code></pre></td><td class="C_btnholder"></td></tr></table></div>
<br>
<br>
You have to set a pointer to point to something you are allowed to access before you can dereference it.<br>
<div class="auto"><table class="snippet"><tr><td class="rownum"><pre><code>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br></code></pre></td>
<td class="source"><pre><code><var>int</var> *foo;

*foo = 42;      <cite>// &lt;-- causes error</cite>
foo[ 3 ] = -7;  <cite>// &lt;-- causes error</cite>

<var>int</var> x;
foo = &amp;x;
*foo = 42;  <cite>// OK, because foo points to x</cite>

foo = malloc( <var>sizeof</var>( <var>int</var> ) *10 );
foo[ 3 ] = -7;  <cite>// OK, because foo points to dynamically-allocated memory</cite>
...
free( foo );</code></pre></td><td class="C_btnholder"></td></tr></table></div>
<br>
<br>
Was that it?
</div>
<div class="dhow">
<span class="sedited">Last edited on <span id="CH_zTmaf40db681c" title="Fri, 15 Aug 2008 16:29:21 +0000"></span><script type="text/javascript">WhenId('CH_zTmaf40db681c');</script><noscript>Aug 15, 2008 at 4:29pm UTC</noscript></span>
<span class="dbtn" id="CH_btn15183"></span>

</div>
</div>
</div>
<div class="C_forPost" id="msg15226"><span title="15226,11884,1023,78,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg15226" title="Link to this post"><img src="../../../img/link.png" width="16" height="8"></a> <span id="CH_zTm58f0e06954" title="Fri, 15 Aug 2008 23:59:16 +0000"></span><script type="text/javascript">WhenId('CH_zTm58f0e06954');</script><noscript>Aug 15, 2008 at 11:59pm UTC</noscript></div>
<div class="dwho"><a href="../../../user/quant/default.htm"><b>quant</b> (78)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i15226">
-&gt;You must open a file (and get its file descriptor) before you can read() it.<br>
Yea, it step I be made.<br>
Hm...<br>
When I want to print Data, take  undeclared (first use in this function)?<br>
I've next listing.<br>
<div class="auto"><table class="snippet"><tr><td class="rownum"><pre><code>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br></code></pre></td>
<td class="source"><pre><code><var>int</var> main (<var>int</var> Wh){
<var>char</var> Data;
<var>int</var> *buf
<var>int</var> *Width;
	File = fopen(/my_file,<kbd>"r"</kbd>);
	<var>if</var>(File==NULL)perror(<kbd>"file size is zero\n"</kbd>);
	<var>else</var>{
	fread(Data,<var>sizeof</var>(<var>char</var>),128,File);
	             	    <var>switch</var>(n) {
				<var>case</var> one;
printf (<kbd>"step\n"</kbd>, <kbd>"Data:"</kbd>, bdData);
					lseek( Data, 6, SEEK_SET );
					read( Data, buf, 4 );
printf (<kbd>"step1\n"</kbd>, <kbd>"buf"</kbd>, buf);
printf (<kbd>"step1,5\n"</kbd>, <kbd>"Data:"</kbd>, Data);
					*Width = buf[ 0 ] + (buf[ 1 ] &lt;&lt; 8);
printf (<kbd>"step3\n"</kbd>);
					Wh = hex(Width); 
<var>break</var>; <cite>//case one</cite>
<var>case</var> two;

...etc...
<var>break</var>;
<var>default</var>:
	<var>break</var>;
}/<var>switch</var>

}<cite>//main </cite></code></pre></td><td class="C_btnholder"></td></tr></table></div>

</div>
<div class="dhow">
<span class="sedited">Last edited on <span id="CH_zTmbc759b722d" title="Sat, 16 Aug 2008 00:01:22 +0000"></span><script type="text/javascript">WhenId('CH_zTmbc759b722d');</script><noscript>Aug 16, 2008 at 12:01am UTC</noscript></span>
<span class="dbtn" id="CH_btn15226"></span>

</div>
</div>
</div>
<div class="C_forPost" id="msg15229"><span title="15229,9110,5119,8826,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg15229" title="Link to this post"><img src="../../../img/link.png" width="16" height="8"></a> <span id="CH_zTm0d1714a7d0" title="Sat, 16 Aug 2008 01:21:41 +0000"></span><script type="text/javascript">WhenId('CH_zTm0d1714a7d0');</script><noscript>Aug 16, 2008 at 1:21am UTC</noscript></div>
<div class="dwho"><a href="../../../user/duoas/default.htm"><b>Duoas</b> (8826)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i15229">
It looks to me like you are a bit more confused than I first thought.<br>
<br>
You absolutely must declare all variables before you use them, and they must be the correct <i>type</i>.<br>
<br>
Also, you cannot (well, <i>should not</i>) mix FILE* functions with File Descriptor functions. Choose one or the other.<br>
<b>fopen</b>() returns a FILE*.<br>
<b>lseek</b>() and <b>read</b>() don't use FILE*s, they use file descriptors.<br>
<br>
Use <b>fopen</b>() with <b>fclose</b>(), <b>fseek</b>(), and <b>fread</b>() (FILE*).<br>
Use <b>open</b>() with <b>close</b>(), <b>lseek</b>(), and <b>read</b>() (file descriptor).<br>
<br>
(A file descriptor is an <b>int</b>. If it helps, give it a type name with typedef.)<br>
<div class="auto"><table class="snippet"><tr><td class="rownum"><pre><code>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br></code></pre></td>
<td class="source"><pre><code><var>typedef</var> <var>int</var> FileDescriptor;
...
<var>char</var> buf[ 4 ];
FileDescriptor f;
...
f = open( <kbd>"fooey.gif"</kbd>, O_RDONLY );
<var>if</var> (f &lt; 0) fooey();
lseek( f, 6, SEEK_SET );
read( f, buf, 4 );
...
close( f );</code></pre></td><td class="C_btnholder"></td></tr></table></div>
<br>
or<br>
<div class="auto"><table class="snippet"><tr><td class="rownum"><pre><code>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br></code></pre></td>
<td class="source"><pre><code>...
<var>char</var> buf[ 4 ];
FILE* f;
...
f = fopen( <kbd>"fooey.gif"</kbd>, <kbd>"rb"</kbd> );
<var>if</var> (f == NULL) fooey();
fseek( f, 6, SEEK_SET );
fread( buf, 1, 4, f );
...
fclose( f );</code></pre></td><td class="C_btnholder"></td></tr></table></div>
<br>
<br>
Oh, one last thing. Main must look like one of the following:<br>
<span class="auto"><code class="source"><var>int</var> main()</code></span> (C89) (C99)<br>
<span class="auto"><code class="source"><var>int</var> main( <var>int</var> argc, <var>char</var>* argv[] )</code></span> (C89) (C99)<br>
<span class="auto"><code class="source"><var>int</var> main( <var>void</var> )</code></span> (C99 only)<br>
<br>
Fix those things, try to compile, and post your full code and errors and we'll see what we can do.
</div>
<div class="dhow">
<span class="dbtn" id="CH_btn15229"></span>

</div>
</div>
</div>
<div class="C_forPost" id="msg15245"><span title="15245,11884,1023,78,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg15245" title="Link to this post"><img src="../../../img/link.png" width="16" height="8"></a> <span id="CH_zTm12401c0476" title="Sat, 16 Aug 2008 09:10:02 +0000"></span><script type="text/javascript">WhenId('CH_zTm12401c0476');</script><noscript>Aug 16, 2008 at 9:10am UTC</noscript></div>
<div class="dwho"><a href="../../../user/quant/default.htm"><b>quant</b> (78)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i15245">
Strange, but it did work incorrectly. Value equals 10 in dec with any input a file.<br>
<div class="auto"><table class="snippet"><tr><td class="rownum"><pre><code>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br></code></pre></td>
<td class="source"><pre><code><var>int</var> hex() {
  <var>unsigned</var> <var>int</var> n;
  <var>while</var> ((n = getchar()) != 1)
    <var>return</var> (n);
    }
main(){
<var>int</var> *H;
<var>int</var> He;
............next body a program.................
H=&amp;He;
He  = buf[ 9 ] +(buf[ 10 ] &lt;&lt; 8);
}</code></pre></td><td class="C_btnholder"></td></tr></table></div>
<br>
It possible take without pointers?<br>
p.s. Anybody have share ebook C++ for Real Programmers?
</div>
<div class="dhow">
<span class="sedited">Last edited on <span id="CH_zTmf75a60701b" title="Sat, 16 Aug 2008 10:06:42 +0000"></span><script type="text/javascript">WhenId('CH_zTmf75a60701b');</script><noscript>Aug 16, 2008 at 10:06am UTC</noscript></span>
<span class="dbtn" id="CH_btn15245"></span>

</div>
</div>
</div>
<div class="C_forPost" id="msg15256"><span title="15256,9110,5119,8826,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg15256" title="Link to this post"><img src="../../../img/link.png" width="16" height="8"></a> <span id="CH_zTm9a653b635a" title="Sat, 16 Aug 2008 11:42:43 +0000"></span><script type="text/javascript">WhenId('CH_zTm9a653b635a');</script><noscript>Aug 16, 2008 at 11:42am UTC</noscript></div>
<div class="dwho"><a href="../../../user/duoas/default.htm"><b>Duoas</b> (8826)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i15256">
I think you need to spend some time looking through some tutorials on handling pointers and arrays. I don't really see why you need to use pointers at all, unless you are trying to return values through function arguments:<br>
<div class="auto"><table class="snippet"><tr><td class="rownum"><pre><code>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br></code></pre></td>
<td class="source"><pre><code><dfn>#include &lt;stdio.h&gt;</dfn>
<dfn>#include &lt;string.h&gt;</dfn>
...
<var>int</var> get_GIF_dimensions( <var>const</var> <var>char</var>* filename, <var>int</var>* width, <var>int</var>* height )
  {
  FILE*         fp;
  <var>unsigned</var> <var>char</var> buf[ 13 ];  <cite>// room for Header and LSD</cite>

  fp = fopen( filename, <kbd>"rb"</kbd> );
  <var>if</var> (fp == NULL) <var>return</var> FALSE;

  <cite>// get Header and LSD and verify that it is a GIF file</cite>
  <var>if</var> ((fread( buf, 1, 13, fp ) != 13)
  ||  (strncmp( buf, <kbd>"GIF"</kbd>, 3 ) != 0))
    {
    fclose( fp );
    <var>return</var> FALSE;
    }

  <cite>// store the logical screen width and height</cite>
  *width  = buf[ 6 ] +(buf[ 7 ] &lt;&lt; 8);
  *height = buf[ 8 ] +(buf[ 9 ] &lt;&lt; 8);

  fclose( fp );
  <var>return</var> TRUE;
  }</code></pre></td><td class="C_btnholder"></td></tr></table></div>
<br>
To use it:<br>
<div class="auto"><table class="snippet"><tr><td class="rownum"><pre><code>1<br>2<br>3<br>4<br>5<br></code></pre></td>
<td class="source"><pre><code><var>int</var> width, height;
<var>if</var> (!get_GIF_dimensions( <kbd>"fooey.gif"</kbd>, &amp;width, &amp;height ))
  printf( <kbd>"I could not open \"fooey.gif\"\n"</kbd> );
<var>else</var>
  printf( <kbd>"width, height = %u,%u\n"</kbd>, width, height );</code></pre></td><td class="C_btnholder"></td></tr></table></div>
<br>
<br>
People are always asking about books on the forum. I'm sure a search would return a lot of useful information.<br>
<br>
Hope this helps.
</div>
<div class="dhow">
<span class="dbtn" id="CH_btn15256"></span>

</div>
</div>
</div>
</div><div class="rootinsMore"></div><div class="rootbtnMore"></div><div class="rootinsNew"></div><div class="rootbtnNew"></div><div id="CH_insNew"></div><div id="CH_reply">Topic archived. No new replies allowed.</div><div id="CH_subscription"></div><div class="rootedtNew"></div><script type="text/javascript">new for_PostList(3506,1,11884,0,'CH_PostList','CH_subscription','CH_reply','CH_insNew','CH_edttl','../../thread.cgi','../../post.cgi','../../myposts.cgi.htm',64,32,512,256,1024,16);</script></div>
<script type="text/javascript"><!--
google_ad_client = "ca-pub-7688470879129516";
google_ad_slot = "7973859818";
google_ad_width = 728;
google_ad_height = 90;
//-->
</script>
<acript type="text/javascript"
src="../../../../pagead2.googlesyndication.com/pagead/show_ads.js">
</script></div>
<div id="I_nav">
<div class="sect root">
<h3><b><a href="../../../default.htm">C++</a></b></h3>
<ul>
<li class="folder info"><a href="../../../info/default.htm">Information</a></li>
<li class="folder doc"><a href="../../../doc/default.htm">Tutorials</a></li>
<li class="folder reference"><a href="../../../reference/default.htm">Reference</a></li>
<li class="folder articles"><a href="../../../articles/default.htm">Articles</a></li>
<li class="folder selected forum"><a href="../../default.htm">Forum</a></li>
</ul>
</div>
<div class="sect">
<h3><b><a href="../../default.htm">Forum</a></b></h3>
<ul>
<li class="selected"><a href="../default.htm"><b>Beginners</b></a></li><li><a href="../../windows/default.htm"><b>Windows Programming</b></a></li><li><a href="../../unices/default.htm"><b>UNIX/Linux Programming</b></a></li><li><a href="../../general/default.htm"><b>General C++ Programming</b></a></li><li><a href="../../lounge/default.htm"><b>Lounge</b></a></li><li><a href="../../jobs/default.htm"><b>Jobs</b></a></li></ul>
</div>
<div id="I_subnav"></div>
<div class="C_ad234">
<script type="text/javascript"><!--
google_ad_client = "ca-pub-7688470879129516";
google_ad_slot = "7445514729";
google_ad_width = 234;
google_ad_height = 60;
//-->
</script>
<acript type="text/javascript"
src="../../../../pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</div></div>
<div id="I_midclear"></div>
</div>
</div>
<div id="I_bottom">
<div id="I_footer">
	<a href="../../../default.htm">Home page</a> | <a href="../../../privacy.do.htm">Privacy policy</a><br>&copy; cplusplus.com, 2000-2014 - All rights reserved - <i>v3.1</i><br><a href="../../../contact.doreferrerwww.cplusplus~247.com_">Spotted an error? contact us</a>
</div>
</div>

<script type="text/javascript">
<!--
function NavFor(us) {document.getElementById('I_subnav').innerHTML=us.ok?'<div class="sect"><h3><b><a href="../../../user/default.htm">'+us.user+'</a></b></h3><ul><li><a href="../../myposts.cgi.htm">My topics</a></li></ul></div>':'';}onSession(NavFor);ready();
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-521783-1']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? '../../../../httpsssl/default.htm' : '../../../../www/default.htm') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();

//-->
</script>

</body>
</html>