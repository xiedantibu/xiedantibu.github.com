<!DOCTYPE html><!-- saved from url=(0056)http://www.cplusplus.com/forum/lounge/146366/default.htm --><meta http-equiv="X-UA-Compatible" content="IE=Edge" />

<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Never trust update - C++ Forum</title>
<link rel="shortcut icon" type="image/x-icon" href="../../../favicon.ico">
<link rel="stylesheet" type="text/css" href="../../../v321/main.css">
<script src="../../../v321/main.js" type="text/javascript"></script>
</head>
<body>
<div id="I_top">
<div id="I_header">
<div id="I_logo"><a href="../../../default.htm" title="cplusplus.com"><div></div></a></div>
<div id="I_search">
<form id="search" action="/search.do" method="get">
Search: <input name="q" size="20" class="txt"> <input type="submit" value="Go" class="btn">
</form>
</div>
<div id="I_bar">
<ul>
<li><a href="../../default.htm">Forum</a></li>
<li><a href="../default.htm">Lounge</a></li>
<li class="here">Never trust update</li>
</ul>
</div>
<div id="I_user" class="C_LoginBox"><span title="ajax"></span></div>
</div>
</div>
<div id="I_mid">
<div id="I_wrap">
<div id="I_minheight"></div>
<div id="I_main">
<div class="C_support"><script type="text/javascript"><!--
if (!cookieGet("hspt31")) {
  document.write('<div class="C_DonateBox"></div>');
}
//-->
</script><div class="C_ad728"><script type="text/javascript"><!--
google_ad_client = "ca-pub-7688470879129516";
google_ad_slot = "7973859818";
google_ad_width = 728;
google_ad_height = 90;
//-->
</script>
<acript type="text/javascript"
src="../../../../pagead2.googlesyndication.com/pagead/show_ads.js">
</script></div><div class="C_supportbottom"></div></div><div id="I_content">
<h3><div class="C_ico default" title="post">&nbsp;</div> Never trust update</h3><span id="CH_edttl"></span><span class="rootdatPost" title="146366,root,0,-1,12,0"></span><div id="CH_PostList"><div class="C_forPost" id="msg769951"><span title="769951,9110,5119,8826,1"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg769951" title="Link to this post"><img src="../../../img/link.png" width="16" height="8"></a> <span id="CH_zTmf5e1fe4456" title="Thu, 30 Oct 2014 08:17:11 +0000"></span><script type="text/javascript">WhenId('CH_zTmf5e1fe4456');</script><noscript>Oct 30, 2014 at 8:17am UTC</noscript></div>
<div class="dwho"><a href="../../../user/duoas/default.htm"><b>Duoas</b> (8826)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i769951">
Alas, I just hosed my MinGW.<br>
<br>
Never, never trust 'update'.<br>
<br>
(Now I'm trying to figure out how to get 4.8 installed. Failing that, I'm going to try to get 4.7.0 back.)
</div>
<div class="dhow">
<span class="dbtn" id="CH_btn769951"></span>

</div>
</div>
</div>
<div class="C_forPost" id="msg769982"><span title="769982,17129,1023,7248,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg769982" title="Link to this post"><img src="../../../img/link.png" width="16" height="8"></a> <span id="CH_zTm26c2c0c4cf" title="Thu, 30 Oct 2014 10:36:12 +0000"></span><script type="text/javascript">WhenId('CH_zTm26c2c0c4cf');</script><noscript>Oct 30, 2014 at 10:36am UTC</noscript></div>
<div class="dwho"><a href="../../../user/kbw/default.htm"><b>kbw</b> (7248)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i769982">
I feel your pain.<br>
<br>
I don't use MinGW, but I use Arch Linux, bleading edge distro that has its moments.  When the update breaks it's a real mess.
</div>
<div class="dhow">
<span class="dbtn" id="CH_btn769982"></span>

</div>
</div>
</div>
<div class="C_forPost" id="msg769994"><span title="769994,9110,5119,8826,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg769994" title="Link to this post"><img src="../../../img/link.png" width="16" height="8"></a> <span id="CH_zTm6049328b0c" title="Thu, 30 Oct 2014 11:14:54 +0000"></span><script type="text/javascript">WhenId('CH_zTm6049328b0c');</script><noscript>Oct 30, 2014 at 11:14am UTC</noscript></div>
<div class="dwho"><a href="../../../user/duoas/default.htm"><b>Duoas</b> (8826)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i769994">
It's the reason I don't use Kubuntu (or any other *ubuntu) anymore too... <br>
<br>
After getting a bunch of broken MinGW builds (because "there is no disk in the drive", apparently, even with <i>old</i> builds), I've finally installed the MinGW-w64 build, which I kind of like. Alas, it's libstdc++-6.dll is incompatible with the official MinGW one but named identically -- meaning I can't just dump them both into C:\Windows\SysWOW64.<br>
<br>
All I wanted was to be able to use &lt;thread&gt;/pthread. :O(<br>
(VS compiles it fine. I shoulda been happy with that.)<br>
<br>
So now that I've got to recompile a lot of stuff... I wonder if I'll mess around with Clang/LLVM or something.<br>
<br>
Fedora keeps me happy too... I don't remember if I played around with Arch Linux before. It looks nice. (If I did, I got one of the broken ones, and put it away...)
</div>
<div class="dhow">
<span class="dbtn" id="CH_btn769994"></span>

</div>
</div>
</div>
<div class="C_forPost" id="msg769995"><span title="769995,17129,1023,7248,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg769995" title="Link to this post"><img src="../../../img/link.png" width="16" height="8"></a> <span id="CH_zTm192ab5b3f9" title="Thu, 30 Oct 2014 11:20:10 +0000"></span><script type="text/javascript">WhenId('CH_zTm192ab5b3f9');</script><noscript>Oct 30, 2014 at 11:20am UTC</noscript></div>
<div class="dwho"><a href="../../../user/kbw/default.htm"><b>kbw</b> (7248)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i769995">
Clang is a work in progress.  The last time I checked, it didn't support deferred/sync flags on std::async for example ... this imperfect world we live in.
</div>
<div class="dhow">
<span class="dbtn" id="CH_btn769995"></span>

</div>
</div>
</div>
<div class="C_forPost" id="msg770040"><span title="770040,29924,1023,4823,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg770040" title="Link to this post"><img src="../../../img/link.png" width="16" height="8"></a> <span id="CH_zTm0d317dbd4c" title="Thu, 30 Oct 2014 13:59:01 +0000"></span><script type="text/javascript">WhenId('CH_zTm0d317dbd4c');</script><noscript>Oct 30, 2014 at 1:59pm UTC</noscript></div>
<div class="dwho"><a href="../../../user/computergeek01/default.htm"><b>Computergeek01</b> (4823)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i770040">
<table class="quote"><tr><td class="qd">Alas, it's libstdc++-6.dll is incompatible with the official MinGW one but named identically -- meaning I can't just dump them both into C:\Windows\SysWOW64.</td></tr></table><br>
<br>
@ <b>Duoas</b>: If you were to argue that you shouldn't have to do this yourself then you would have a valid point, I'm certain that no one here would disagree with you. However, if you are truly dead set on accomplishing this, then that issue is a solved problem: <br>
<br>
You could use a '.config' file to set the search path to the local directory before anything else. IIRC you're old enough to remember when DLL redirection was the goto exploit for the lazy, this would be using it for it's intended purpose. 
</div>
<div class="dhow">
<span class="dbtn" id="CH_btn770040"></span>

</div>
</div>
</div>
<div class="C_forPost" id="msg770071"><span title="770071,39669,1023,1988,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg770071" title="Link to this post"><img src="../../../img/link.png" width="16" height="8"></a> <span id="CH_zTm45e04f4900" title="Thu, 30 Oct 2014 15:33:22 +0000"></span><script type="text/javascript">WhenId('CH_zTm45e04f4900');</script><noscript>Oct 30, 2014 at 3:33pm UTC</noscript></div>
<div class="dwho"><a href="../../../user/modoran/default.htm"><b>modoran</b> (1988)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i770071">
I suggest you to use MinGW-w64 from here, it has support for threads:<br>
<a href="../../../../tdragon.net/recentgcc/default.htm">http://tdragon.net/recentgcc/</a><br>
<br>
libstdc++ is linked statically by default, don't worry about that and can create both x86 and x64 binaries.
</div>
<div class="dhow">
<span class="dbtn" id="CH_btn770071"></span>

</div>
</div>
</div>
<div class="C_forPost" id="msg770096"><span title="770096,38387,1023,10731,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg770096" title="Link to this post"><img src="../../../img/link.png" width="16" height="8"></a> <span id="CH_zTm89f9619e46" title="Thu, 30 Oct 2014 16:39:28 +0000"></span><script type="text/javascript">WhenId('CH_zTm89f9619e46');</script><noscript>Oct 30, 2014 at 4:39pm UTC</noscript></div>
<div class="dwho"><a href="../../../user/lb/default.htm"><b>LB</b> (10731)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i770096">
Getting <i>any</i> compiler to work has always been a huge messy pain for me. Thankfully the good people over at LLVM are making excellent progress with the Windows version of clang.<br>
<br>
In any other language (even C), getting compilers and libraries to work is easy. In C++? I usually give up and return months later to find that it magically works.
</div>
<div class="dhow">
<span class="dbtn" id="CH_btn770096"></span>

</div>
</div>
</div>
<div class="C_forPost" id="msg770102"><span title="770102,9110,5119,8826,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg770102" title="Link to this post"><img src="../../../img/link.png" width="16" height="8"></a> <span id="CH_zTm0c20d27091" title="Thu, 30 Oct 2014 16:54:18 +0000"></span><script type="text/javascript">WhenId('CH_zTm0c20d27091');</script><noscript>Oct 30, 2014 at 4:54pm UTC</noscript></div>
<div class="dwho"><a href="../../../user/duoas/default.htm"><b>Duoas</b> (8826)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i770102">
@<b>kbw</b><br>
:OS<br>
<br>
@<b>Computergeek01</b><br>
Hmm, I hadn't thought of that. DLL redirection is for overriding a specific program's DLL choice. And, AFAIK, it only allows redirection of the target directory, not the target basefile name. And if I were to try to distribute a program I wrote, I can't just poke the DLL in some non-standard spot on the user's system. It would have to go in the application directory -- obviating the need for redirection...<br>
<br>
Though, I wonder if I can update the exe's symbol table to want to use a differently named DLL... I'll have to look at that.<br>
<br>
(The whole point, though, was just for my own personal system... Since I don't normally keep any compiler's executable in my system path. It automatically adds it only when I use it from the command shell.)<br>
<br>
(Oh, and you don't need a separate file -- use a Manifest :O)<br>
<br>
Thanks!<br>
<br>
@<b>modoran</b><br>
Wow, definitely going to mess with that.<br>
<br>
I had previously thought that there were nebulous legal issues with statically linking the GNU runtime... But having re-read I see that I just need to have a link to the GNU libc somewhere in the documentation.<br>
<br>
Thanks!
</div>
<div class="dhow">
<span class="dbtn" id="CH_btn770102"></span>

</div>
</div>
</div>
<div class="C_forPost" id="msg770123"><span title="770123,29924,1023,4823,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg770123" title="Link to this post"><img src="../../../img/link.png" width="16" height="8"></a> <span id="CH_zTm7f6ee0e325" title="Thu, 30 Oct 2014 18:01:42 +0000"></span><script type="text/javascript">WhenId('CH_zTm7f6ee0e325');</script><noscript>Oct 30, 2014 at 6:01pm UTC</noscript></div>
<div class="dwho"><a href="../../../user/computergeek01/default.htm"><b>Computergeek01</b> (4823)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i770123">
<table class="quote"><tr><td class="qd">(Oh, and you don't need a separate file -- use a Manifest :O)</td></tr></table><br>
But whether you compile it into the executable or not, a manifest is a separate file... Any way yeah a manifest file is the ideal solution for executable files that you are distributing. But for something you didn't compile like MingW and you're using your self it seems like more work for just about the same result. I'm sure you already know, but remember to redirect everything in the tool chain to the same library. I broke MIDL for a day or two with that mistake.<br>
<br>
<table class="quote"><tr><td class="qd">And if I were to try to distribute a program I wrote, I can't just poke the DLL in some non-standard spot on the user's system.</td></tr></table><br>
That's exactly what Windows Side by Side is for though whether you use a .config file or a manifest. The "standard spot" for manifest files would be 'C:\Windows\WinSxS".<br>
<br>
I hope that you're not seriously considering renaming the DLL. That just feels "hackish". 
</div>
<div class="dhow">
<span class="dbtn" id="CH_btn770123"></span>

</div>
</div>
</div>
<div class="C_forPost" id="msg770151"><span title="770151,9110,5119,8826,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg770151" title="Link to this post"><img src="../../../img/link.png" width="16" height="8"></a> <span id="CH_zTme42b5f928b" title="Thu, 30 Oct 2014 19:07:14 +0000"></span><script type="text/javascript">WhenId('CH_zTme42b5f928b');</script><noscript>Oct 30, 2014 at 7:07pm UTC</noscript></div>
<div class="dwho"><a href="../../../user/duoas/default.htm"><b>Duoas</b> (8826)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i770151">
Hmm, I don't know anything about side by side assemblies (other than they exist). I've got some learning to do...<br>
<br>
<table class="quote"><tr><td class="qd">"hackish"</td></tr></table><br>
:o&gt;
</div>
<div class="dhow">
<span class="dbtn" id="CH_btn770151"></span>

</div>
</div>
</div>
<div class="C_forPost" id="msg770177"><span title="770177,17129,1023,7248,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg770177" title="Link to this post"><img src="../../../img/link.png" width="16" height="8"></a> <span id="CH_zTm92e701cc72" title="Thu, 30 Oct 2014 20:28:29 +0000"></span><script type="text/javascript">WhenId('CH_zTm92e701cc72');</script><noscript>Oct 30, 2014 at 8:28pm UTC</noscript></div>
<div class="dwho"><a href="../../../user/kbw/default.htm"><b>kbw</b> (7248)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i770177">
They're more trouble than they're worth.
</div>
<div class="dhow">
<span class="dbtn" id="CH_btn770177"></span>

</div>
</div>
</div>
<div class="C_forPost" id="msg770933"><span title="770933,63891,1023,2305,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg770933" title="Link to this post"><img src="../../../img/link.png" width="16" height="8"></a> <span id="CH_zTm97c26da619" title="Sat, 01 Nov 2014 20:20:44 +0000"></span><script type="text/javascript">WhenId('CH_zTm97c26da619');</script><noscript>Nov 1, 2014 at 8:20pm UTC</noscript></div>
<div class="dwho"><a href="../../../user/essgeeich/default.htm"><b>EssGeEich</b> (2305)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i770933">
I switched to MingW-w64 a week ago, version 4.9.1:<br>
<a href="../../../../sourceforge.net/projects/mingw-w64/files/toolchains%20targetting%20win64/personal%20builds/mingw-builds/default.htm">http://sourceforge.net/projects/mingw-w64/files/Toolchains%20targetting%20Win64/Personal%20Builds/mingw-builds/</a><br>
(Oh wow the 4.9.2 folder was created 3hs ago)<br>
About win32/pthread threads:<br>
I didn't personally test it on my own, but from what people says, pthread allows &lt;thread&gt;, but it seems like it's not as fast as regular win32 threads.<br>
The SJLJ exception system is the old one. The SEH is the one Windows uses.<br>
Using SJLJ an exception within a windows callback will not propagate, whereas it will using the SEH.<br>
<br>
About DLLs, lately I've been redistributing all the DLLs with my EXE's.<br>
I now have multiple DLLs named equally, but some are for x86, some for x64, and I really can't rename them.
</div>
<div class="dhow">
<span class="sedited">Last edited on <span id="CH_zTm4be4213d71" title="Sat, 01 Nov 2014 20:26:35 +0000"></span><script type="text/javascript">WhenId('CH_zTm4be4213d71');</script><noscript>Nov 1, 2014 at 8:26pm UTC</noscript></span>
<span class="dbtn" id="CH_btn770933"></span>

</div>
</div>
</div>
</div><div class="rootinsMore"></div><div class="rootbtnMore"></div><div class="rootinsNew"></div><div class="rootbtnNew"></div><div id="CH_insNew"></div><div id="CH_reply">Registered users can post here. <a href="../../../user/default.htm">Sign in or register</a> to post.</div><div id="CH_subscription"></div><div class="rootedtNew"></div><script type="text/javascript">new for_PostList(146366,0,9110,0,'CH_PostList','CH_subscription','CH_reply','CH_insNew','CH_edttl','../../thread.cgi','../../post.cgi','../../myposts.cgi.htm',64,32,512,256,1024,16);</script></div>
<script type="text/javascript"><!--
google_ad_client = "ca-pub-7688470879129516";
google_ad_slot = "7973859818";
google_ad_width = 728;
google_ad_height = 90;
//-->
</script>
<acript type="text/javascript"
src="../../../../pagead2.googlesyndication.com/pagead/show_ads.js">
</script></div>
<div id="I_nav">
<div class="sect root">
<h3><b><a href="../../../default.htm">C++</a></b></h3>
<ul>
<li class="folder info"><a href="../../../info/default.htm">Information</a></li>
<li class="folder doc"><a href="../../../doc/default.htm">Tutorials</a></li>
<li class="folder reference"><a href="../../../reference/default.htm">Reference</a></li>
<li class="folder articles"><a href="../../../articles/default.htm">Articles</a></li>
<li class="folder selected forum"><a href="../../default.htm">Forum</a></li>
</ul>
</div>
<div class="sect">
<h3><b><a href="../../default.htm">Forum</a></b></h3>
<ul>
<li><a href="../../beginner/default.htm"><b>Beginners</b></a></li><li><a href="../../windows/default.htm"><b>Windows Programming</b></a></li><li><a href="../../unices/default.htm"><b>UNIX/Linux Programming</b></a></li><li><a href="../../general/default.htm"><b>General C++ Programming</b></a></li><li class="selected"><a href="../default.htm"><b>Lounge</b></a></li><li><a href="../../jobs/default.htm"><b>Jobs</b></a></li></ul>
</div>
<div id="I_subnav"></div>
<div class="C_ad234">
<script type="text/javascript"><!--
google_ad_client = "ca-pub-7688470879129516";
google_ad_slot = "7445514729";
google_ad_width = 234;
google_ad_height = 60;
//-->
</script>
<acript type="text/javascript"
src="../../../../pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</div></div>
<div id="I_midclear"></div>
</div>
</div>
<div id="I_bottom">
<div id="I_footer">
	<a href="../../../default.htm">Home page</a> | <a href="../../../privacy.do.htm">Privacy policy</a><br>&copy; cplusplus.com, 2000-2014 - All rights reserved - <i>v3.1</i><br><a href="../../../contact.doreferrerwww.cplusplus~652.com_">Spotted an error? contact us</a>
</div>
</div>

<script type="text/javascript">
<!--
function NavFor(us) {document.getElementById('I_subnav').innerHTML=us.ok?'<div class="sect"><h3><b><a href="../../../user/default.htm">'+us.user+'</a></b></h3><ul><li><a href="../../myposts.cgi.htm">My topics</a></li></ul></div>':'';}onSession(NavFor);ready();
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-521783-1']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? '../../../../httpsssl/default.htm' : '../../../../www/default.htm') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();

//-->
</script>

</body>
</html>