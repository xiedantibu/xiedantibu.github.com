<!DOCTYPE html><!-- saved from url=(0057)http://www.cplusplus.com/forum/windows/142095/default.htm --><meta http-equiv="X-UA-Compatible" content="IE=Edge" />

<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Writing / appending to a specific line i - C++ Forum</title>
<link rel="shortcut icon" type="image/x-icon" href="../../../favicon.ico">
<link rel="stylesheet" type="text/css" href="../../../v321/main.css">
<script src="../../../v321/main.js" type="text/javascript"></script>
</head>
<body>
<div id="I_top">
<div id="I_header">
<div id="I_logo"><a href="../../../default.htm" title="cplusplus.com"><div></div></a></div>
<div id="I_search">
<form id="search" action="/search.do" method="get">
Search: <input name="q" size="20" class="txt"> <input type="submit" value="Go" class="btn">
</form>
</div>
<div id="I_bar">
<ul>
<li><a href="../../default.htm">Forum</a></li>
<li><a href="../default.htm">Windows Programming</a></li>
<li class="here">Writing / appending to a specific line i</li>
</ul>
</div>
<div id="I_user" class="C_LoginBox"><span title="ajax"></span></div>
</div>
</div>
<div id="I_mid">
<div id="I_wrap">
<div id="I_minheight"></div>
<div id="I_main">
<div class="C_support"><script type="text/javascript"><!--
if (!cookieGet("hspt31")) {
  document.write('<div class="C_DonateBox"></div>');
}
//-->
</script><div class="C_ad728"><script type="text/javascript"><!--
google_ad_client = "ca-pub-7688470879129516";
google_ad_slot = "7973859818";
google_ad_width = 728;
google_ad_height = 90;
//-->
</script>
<acript type="text/javascript"
src="../../../../pagead2.googlesyndication.com/pagead/show_ads.js">
</script></div><div class="C_supportbottom"></div></div><div id="I_content">
<h3><div class="C_ico default" title="post">&nbsp;</div> Writing / appending to a specific line in text file</h3><span id="CH_edttl"></span><span class="rootdatPost" title="142095,root,0,-1,7,0"></span><div id="CH_PostList"><div class="C_forPost" id="msg750056"><span title="750056,84728,1023,64,1"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg750056" title="Link to this post"><img src="../../../img/link.png" width="16" height="8"></a> <span id="CH_zTm75b6f71a93" title="Tue, 09 Sep 2014 12:23:49 +0000"></span><script type="text/javascript">WhenId('CH_zTm75b6f71a93');</script><noscript>Sep 9, 2014 at 12:23pm UTC</noscript></div>
<div class="dwho"><a href="../../../user/sambos/default.htm"><b>sambos</b> (64)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i750056">
Hi,<br>
<br>
With the help of some cplusplus.com users, I was able to work out how to read a specific line of text within a text file and display this in a richTextBox. See:<br>
<a href="../140812/default.htm">http://www.cplusplus.com/forum/windows/140812/</a><br>
<br>
The next bit of code I'm trying to work on is to write / append to a specific line of text.<br>
<br>
For example: Text.txt has the following lines...<br>
<br>
001 This is line 1<br>
002 This is line 2<br>
003 This is line 3<br>
<br>
Note: the numbers (e.g. 001) act like a line ID tag type of thing...<br>
<br>
Lets say I have a form with a richTextBox and a button. I would like to have whatever is written in this richTextBox to be appended to a line ID. For example, if the text "This line has been changed" was typed into richTextBox1 clicking the button would append this to line ID 002. Once clicked, the text file would be:<br>
<br>
001 This is line 1<br>
002 This line has been changed<br>
003 This is line 3<br>
<br>
Any adice would be great, or even a link to something useful....I've spent some time googling but can't seem to find something that helps.<br>
<br>
Cheers.
</div>
<div class="dhow">
<span class="dbtn" id="CH_btn750056"></span>

</div>
</div>
</div>
<div class="C_forPost" id="msg750063"><span title="750063,17129,1023,7248,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg750063" title="Link to this post"><img src="../../../img/link.png" width="16" height="8"></a> <span id="CH_zTmf3826c2131" title="Tue, 09 Sep 2014 13:01:32 +0000"></span><script type="text/javascript">WhenId('CH_zTmf3826c2131');</script><noscript>Sep 9, 2014 at 1:01pm UTC</noscript></div>
<div class="dwho"><a href="../../../user/kbw/default.htm"><b>kbw</b> (7248)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i750063">
A text file has sequential access, so you'd have to rewrite the file if you wanted to insert something.
</div>
<div class="dhow">
<span class="dbtn" id="CH_btn750063"></span>

</div>
</div>
</div>
<div class="C_forPost" id="msg750221"><span title="750221,84728,1023,64,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg750221" title="Link to this post"><img src="../../../img/link.png" width="16" height="8"></a> <span id="CH_zTm9b490346eb" title="Tue, 09 Sep 2014 22:19:29 +0000"></span><script type="text/javascript">WhenId('CH_zTm9b490346eb');</script><noscript>Sep 9, 2014 at 10:19pm UTC</noscript></div>
<div class="dwho"><a href="../../../user/sambos/default.htm"><b>sambos</b> (64)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i750221">
Thanks, kbw.<br>
<br>
I thought that this would be the case... So what would be the best approach?<br>
<br>
How about: reading entire file with say 'StreamReader' and storing it as a string, then using a 'while' loop to search for the required line ID, then overwrite that line?<br>
<br>
I'm not exactly sure how to approach this. Obviously 'getline' wouldn't be used as this is only for reading files....<br>
<br>
Cheers,
</div>
<div class="dhow">
<span class="sedited">Last edited on <span id="CH_zTm7598bb15d0" title="Tue, 09 Sep 2014 22:26:37 +0000"></span><script type="text/javascript">WhenId('CH_zTm7598bb15d0');</script><noscript>Sep 9, 2014 at 10:26pm UTC</noscript></span>
<span class="dbtn" id="CH_btn750221"></span>

</div>
</div>
</div>
<div class="C_forPost" id="msg750234"><span title="750234,17129,1023,7248,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg750234" title="Link to this post"><img src="../../../img/link.png" width="16" height="8"></a> <span id="CH_zTm79c7ee042c" title="Wed, 10 Sep 2014 00:04:57 +0000"></span><script type="text/javascript">WhenId('CH_zTm79c7ee042c');</script><noscript>Sep 10, 2014 at 12:04am UTC</noscript></div>
<div class="dwho"><a href="../../../user/kbw/default.htm"><b>kbw</b> (7248)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i750234">
If it's small enough, read the whole thing into memory, make your changes, then write out the whole thing.
</div>
<div class="dhow">
<span class="dbtn" id="CH_btn750234"></span>

</div>
</div>
</div>
<div class="C_forPost" id="msg750247"><span title="750247,84728,1023,64,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg750247" title="Link to this post"><img src="../../../img/link.png" width="16" height="8"></a> <span id="CH_zTma9c1dfc5b6" title="Wed, 10 Sep 2014 01:06:52 +0000"></span><script type="text/javascript">WhenId('CH_zTma9c1dfc5b6');</script><noscript>Sep 10, 2014 at 1:06am UTC</noscript></div>
<div class="dwho"><a href="../../../user/sambos/default.htm"><b>sambos</b> (64)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i750247">
Hi kbw,<br>
<br>
I would assume that this would be via an array? That is, each line is put into an element (is that the right term?) of an array. Then I would change that particular element, then dump everything back into that file (i.e. overwrite it)?<br>
<br>
As for file size, I'm not too sure how big this will be but I'm guessing that it would be no more than a 1000 lines of text. Each line would vary with number of characters....<br>
<br>
Cheers,
</div>
<div class="dhow">
<span class="dbtn" id="CH_btn750247"></span>

</div>
</div>
</div>
<div class="C_forPost" id="msg750364"><span title="750364,17129,1023,7248,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg750364" title="Link to this post"><img src="../../../img/link.png" width="16" height="8"></a> <span id="CH_zTm19d087acb3" title="Wed, 10 Sep 2014 11:10:32 +0000"></span><script type="text/javascript">WhenId('CH_zTm19d087acb3');</script><noscript>Sep 10, 2014 at 11:10am UTC</noscript></div>
<div class="dwho"><a href="../../../user/kbw/default.htm"><b>kbw</b> (7248)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i750364">
An array is ok, and your method is ok.  The memory should be fine.<br>
<br>

</div>
<div class="dhow">
<span class="dbtn" id="CH_btn750364"></span>

</div>
</div>
</div>
<div class="C_forPost" id="msg755775"><span title="755775,76935,1023,19,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg755775" title="Link to this post"><img src="../../../img/link.png" width="16" height="8"></a> <span id="CH_zTm0b11d58292" title="Wed, 24 Sep 2014 21:32:18 +0000"></span><script type="text/javascript">WhenId('CH_zTm0b11d58292');</script><noscript>Sep 24, 2014 at 9:32pm UTC</noscript></div>
<div class="dwho"><a href="../../../user/igor1985/default.htm"><b>igor1985</b> (19)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i755775">
check out SetFilePointer() API.<br>
you can point to a particular offset in the file, and edit its contents..
</div>
<div class="dhow">
<span class="dbtn" id="CH_btn755775"></span>

</div>
</div>
</div>
</div><div class="rootinsMore"></div><div class="rootbtnMore"></div><div class="rootinsNew"></div><div class="rootbtnNew"></div><div id="CH_insNew"></div><div id="CH_reply">Topic archived. No new replies allowed.</div><div id="CH_subscription"></div><div class="rootedtNew"></div><script type="text/javascript">new for_PostList(142095,1,84728,0,'CH_PostList','CH_subscription','CH_reply','CH_insNew','CH_edttl','../../thread.cgi','../../post.cgi','../../myposts.cgi.htm',64,32,512,256,1024,16);</script></div>
</div>
<div id="I_nav">
<div class="sect root">
<h3><b><a href="../../../default.htm">C++</a></b></h3>
<ul>
<li class="folder info"><a href="../../../info/default.htm">Information</a></li>
<li class="folder doc"><a href="../../../doc/default.htm">Tutorials</a></li>
<li class="folder reference"><a href="../../../reference/default.htm">Reference</a></li>
<li class="folder articles"><a href="../../../articles/default.htm">Articles</a></li>
<li class="folder selected forum"><a href="../../default.htm">Forum</a></li>
</ul>
</div>
<div class="sect">
<h3><b><a href="../../default.htm">Forum</a></b></h3>
<ul>
<li><a href="../../beginner/default.htm"><b>Beginners</b></a></li><li class="selected"><a href="../default.htm"><b>Windows Programming</b></a></li><li><a href="../../unices/default.htm"><b>UNIX/Linux Programming</b></a></li><li><a href="../../general/default.htm"><b>General C++ Programming</b></a></li><li><a href="../../lounge/default.htm"><b>Lounge</b></a></li><li><a href="../../jobs/default.htm"><b>Jobs</b></a></li></ul>
</div>
<div id="I_subnav"></div>
<div class="C_ad234">
<script type="text/javascript"><!--
google_ad_client = "ca-pub-7688470879129516";
google_ad_slot = "7445514729";
google_ad_width = 234;
google_ad_height = 60;
//-->
</script>
<acript type="text/javascript"
src="../../../../pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</div></div>
<div id="I_midclear"></div>
</div>
</div>
<div id="I_bottom">
<div id="I_footer">
	<a href="../../../default.htm">Home page</a> | <a href="../../../privacy.do.htm">Privacy policy</a><br>&copy; cplusplus.com, 2000-2014 - All rights reserved - <i>v3.1</i><br><a href="../../../contact.doreferrerwww.cplusplus~528.com_">Spotted an error? contact us</a>
</div>
</div>

<script type="text/javascript">
<!--
function NavFor(us) {document.getElementById('I_subnav').innerHTML=us.ok?'<div class="sect"><h3><b><a href="../../../user/default.htm">'+us.user+'</a></b></h3><ul><li><a href="../../myposts.cgi.htm">My topics</a></li></ul></div>':'';}onSession(NavFor);ready();
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-521783-1']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? '../../../../httpsssl/default.htm' : '../../../../www/default.htm') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();

//-->
</script>

</body>
</html>