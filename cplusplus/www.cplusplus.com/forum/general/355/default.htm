<!DOCTYPE html><!-- saved from url=(0054)http://www.cplusplus.com/forum/general/355/default.htm --><meta http-equiv="X-UA-Compatible" content="IE=Edge" />

<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Calculation - C++ Forum</title>
<link rel="shortcut icon" type="image/x-icon" href="../../../favicon.ico">
<link rel="stylesheet" type="text/css" href="../../../v321/main.css">
<script src="../../../v321/main.js" type="text/javascript"></script>
</head>
<body>
<div id="I_top">
<div id="I_header">
<div id="I_logo"><a href="../../../default.htm" title="cplusplus.com"><div></div></a></div>
<div id="I_search">
<form id="search" action="/search.do" method="get">
Search: <input name="q" size="20" class="txt"> <input type="submit" value="Go" class="btn">
</form>
</div>
<div id="I_bar">
<ul>
<li><a href="../../default.htm">Forum</a></li>
<li><a href="../default.htm">General C++ Programming</a></li>
<li class="here">Calculation</li>
</ul>
</div>
<div id="I_user" class="C_LoginBox"><span title="ajax"></span></div>
</div>
</div>
<div id="I_mid">
<div id="I_wrap">
<div id="I_minheight"></div>
<div id="I_main">
<div class="C_support"><script type="text/javascript"><!--
if (!cookieGet("hspt31")) {
  document.write('<div class="C_DonateBox"></div>');
}
//-->
</script><div class="C_ad728"><script type="text/javascript"><!--
google_ad_client = "ca-pub-7688470879129516";
google_ad_slot = "7973859818";
google_ad_width = 728;
google_ad_height = 90;
//-->
</script>
<acript type="text/javascript"
src="../../../../pagead2.googlesyndication.com/pagead/show_ads.js">
</script></div><div class="C_supportbottom"></div></div><div id="I_content">
<h3><div class="C_ico question" title="question">&nbsp;</div> Calculation</h3><span id="CH_edttl"></span><span class="rootdatPost" title="355,root,0,-1,6,0"></span><div id="CH_PostList"><div class="C_forPost" id="msg1157"><span title="1157,9085,1023,19,1"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg1157" title="Link to this post"><img src="../../../img/link.png" width="16" height="8"></a> <span id="CH_zTm5cbaad7dea" title="Wed, 13 Feb 2008 20:14:47 +0000"></span><script type="text/javascript">WhenId('CH_zTm5cbaad7dea');</script><noscript>Feb 13, 2008 at 8:14pm UTC</noscript></div>
<div class="dwho"><a href="../../../user/ogranatw/default.htm"><b>ogranatw</b> (19)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i1157">
I am a beginner and I need help writing a calculation program. <br>
The program should be able to handle at least 8 operators, square, sin, cos, tan, powers, +, -, *, /. <br>
The program should be able to handle all these things in one expression. <br>
<br>
For example: v for square, s for sin, c for cos, t for tan and ^ for power. v(s3.4/5^8). T<br>
he program needs to understand parenthesis. And square, sin, cos and tan should be used as a "prefix" (executed on the following operator). <br>
And when '=' is put in the result is written out, the program resets and restarts.<br>
<br>
And if you could put in some comentaries in the code, so I know waht you've dont. It would be very helpful for the future.<br>
<br>
Please help me!!!<br>
<br>
Thank you
</div>
<div class="dhow">
<span class="sedited">Last edited on <span id="CH_zTm368bd6028c" title="Wed, 13 Feb 2008 21:27:13 +0000"></span><script type="text/javascript">WhenId('CH_zTm368bd6028c');</script><noscript>Feb 13, 2008 at 9:27pm UTC</noscript></span>
<span class="dbtn" id="CH_btn1157"></span>

</div>
</div>
</div>
<div class="C_forPost" id="msg1289"><span title="1289,9110,5119,8826,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg1289" title="Link to this post"><img src="../../../img/link.png" width="16" height="8"></a> <span id="CH_zTmb5bbdc255c" title="Sun, 17 Feb 2008 18:51:40 +0000"></span><script type="text/javascript">WhenId('CH_zTmb5bbdc255c');</script><noscript>Feb 17, 2008 at 6:51pm UTC</noscript></div>
<div class="dwho"><a href="../../../user/duoas/default.htm"><b>Duoas</b> (8826)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i1289">
Unfortunately, no one here is going to do your homework for you.<br>
<br>
I don't know why CS 101/102 professors continue to give this as homework. It is not a particularly simple thing to do.<br>
<br>
You might want to google around "recursive descent".<br>
<br>
Good luck.
</div>
<div class="dhow">
<span class="dbtn" id="CH_btn1289"></span>

</div>
</div>
</div>
<div class="C_forPost" id="msg1380"><span title="1380,9189,1023,15,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg1380" title="Link to this post"><img src="../../../img/link.png" width="16" height="8"></a> <span id="CH_zTmdabbbdcd50" title="Tue, 19 Feb 2008 04:56:27 +0000"></span><script type="text/javascript">WhenId('CH_zTmdabbbdcd50');</script><noscript>Feb 19, 2008 at 4:56am UTC</noscript></div>
<div class="dwho"><a href="../../../user/graham/default.htm"><b>Graham</b> (15)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i1380">
It is NOT simple, at all.<br>
<br>
For a while, I've tried to do this, and have never succeded...<br>
<br>
If you get a clue, contact me. I'd love to know.<br>
<br>
PS: See the book listed in my Bio, it has an exercise after chapter 12 describing how to do this in detail.
</div>
<div class="dhow">
<span class="dbtn" id="CH_btn1380"></span>

</div>
</div>
</div>
<div class="C_forPost" id="msg1532"><span title="1532,9113,1023,13,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg1532" title="Link to this post"><img src="../../../img/link.png" width="16" height="8"></a> <span id="CH_zTmad1bfda23f" title="Fri, 22 Feb 2008 18:35:57 +0000"></span><script type="text/javascript">WhenId('CH_zTmad1bfda23f');</script><noscript>Feb 22, 2008 at 6:35pm UTC</noscript></div>
<div class="dwho"><a href="../../../user/mezosoft/default.htm"><b>mezosoft</b> (13)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i1532">
hello i'm mo3taz from egypt,<br>
i,ve solved this problem but just for the operators +,-;<br>
example input: 1+2+3-2+3-4+5.<br>
out put: the result<br>
don't forget the fullstop at the end<br>
<div class="auto"><table class="snippet"><tr><td class="rownum"><pre><code>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>30<br>31<br>32<br>33<br>34<br>35<br>36<br>37<br>38<br>39<br>40<br>41<br>42<br>43<br>44<br>45<br>46<br>47<br>48<br>49<br>50<br>51<br></code></pre></td>
<td class="source"><pre><code><dfn># include &lt;iostream.h&gt;</dfn>
<var>int</var> main()
{
<var>int</var> sum = 0; 
<var>int</var> x , y;                                     <cite>// two successive numbers in the input between them</cite>
<var>char</var> test = <kbd>'r'</kbd>;                           <cite>// an operator</cite>
<var>char</var> op;                                    <cite>// stands for an operator</cite>
<var>while</var> (test == <kbd>'c'</kbd> || test == <kbd>'r'</kbd>) <cite>// tests for continue(c) or restart (r)</cite>
{
 <var>if</var> ( test == <kbd>'r'</kbd>)
 {
  sum = 0;
  cout &lt;&lt; <kbd>"___________________________________________________________________"</kbd>;
  cout &lt;&lt; <kbd>"\nplease enter some successive numbers between each two an operator\n"</kbd>;
  cout &lt;&lt; <kbd>"the equation encludes just '+' or '-' ( example:1+2-3+4.) \n"</kbd>;
 }
 <var>if</var> (test == <kbd>'c'</kbd>)
  {
  cout &lt;&lt; <kbd>" please enter another sequence to add to the old sequence\n"</kbd>;
  cout &lt;&lt; <kbd>"the old value was : "</kbd> &lt;&lt; sum &lt;&lt; endl;
  }
 cin &gt;&gt; x;
 cin &gt;&gt; op;
 cin &gt;&gt; y;
 <var>if</var> (op == <kbd>'+'</kbd>)
  sum = (sum + x + y);
 <var>else</var> <var>if</var> ( op == <kbd>'-'</kbd>)
  sum = (sum + x - y);

 <var>while</var> (op != <kbd>'.'</kbd>)

  {
   cin &gt;&gt; op;
   <var>if</var> (op == <kbd>'.'</kbd>) <var>break</var> ;  <cite>// notice that the operator may be '.'</cite>
   cin &gt;&gt; y ;              <cite>// after entering the while loop</cite>
   <var>if</var> (op == <kbd>'+'</kbd>)
   sum = (sum + y);
   <var>else</var> <var>if</var> (op == <kbd>'-'</kbd>)
   sum = (sum - y);

  }

  cout &lt;&lt;<kbd>"the result of this sequenc is: \n:"</kbd> &lt;&lt; sum &lt;&lt; endl;
  cout &lt;&lt; <kbd>"please enter c to continue calculating to the old result\n"</kbd>;
  cout &lt;&lt; <kbd>"please enter r to restart and calculate a new value\n"</kbd>;
  cout &lt;&lt; <kbd>" please enter e to exit \n "</kbd>;
  cin&gt;&gt; test;
  <var>if</var> (test == <kbd>'e'</kbd>)
  <var>break</var>;
  }
}</code></pre></td><td class="C_btnholder"></td></tr></table></div>
<br>
if there is any problem with this tell me , and i'll try to insert other operators<br>
my e_mail is : mo3taz_kilany@hotmail.com
</div>
<div class="dhow">
<span class="sedited">Last edited on <span id="CH_zTmeaccecd647" title="Fri, 22 Feb 2008 18:38:09 +0000"></span><script type="text/javascript">WhenId('CH_zTmeaccecd647');</script><noscript>Feb 22, 2008 at 6:38pm UTC</noscript></span>
<span class="dbtn" id="CH_btn1532"></span>

</div>
</div>
</div>
<div class="C_forPost" id="msg1654"><span title="1654,9378,1023,2,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg1654" title="Link to this post"><img src="../../../img/link.png" width="16" height="8"></a> <span id="CH_zTme4334d9904" title="Mon, 25 Feb 2008 20:38:13 +0000"></span><script type="text/javascript">WhenId('CH_zTme4334d9904');</script><noscript>Feb 25, 2008 at 8:38pm UTC</noscript></div>
<div class="dwho"><a href="../../../user/wooden_nose/default.htm"><b>wooden nose</b> (2)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i1654">
There is a way to solve this problem with a recurive descent:<br>
<br>
I have *fully* copied this code from Arnold Willemers page (<a href="../../../../www.willemer.de/informatik/cpp/rekursion.htm%29">http://www.willemer.de/informatik/cpp/rekursion.htm)</a> <br>
But you can also find it in one of his books.<br>
<br>
<div class="auto"><table class="snippet"><tr><td class="rownum"><pre><code>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>30<br>31<br>32<br>33<br>34<br>35<br>36<br>37<br>38<br>39<br>40<br>41<br>42<br>43<br>44<br>45<br>46<br>47<br>48<br>49<br>50<br>51<br>52<br>53<br>54<br>55<br>56<br>57<br>58<br>59<br>60<br>61<br>62<br>63<br>64<br>65<br>66<br>67<br>68<br>69<br>70<br>71<br>72<br>73<br>74<br>75<br>76<br>77<br>78<br>79<br>80<br>81<br>82<br>83<br>84<br>85<br>86<br>87<br>88<br>89<br>90<br>91<br>92<br>93<br>94<br>95<br>96<br>97<br>98<br>99<br>100<br>101<br>102<br>103<br>104<br>105<br>106<br>107<br>108<br>109<br>110<br>111<br>112<br>113<br>114<br>115<br>116<br>117<br>118<br>119<br>120<br>121<br>122<br>123<br>124<br>125<br>126<br>127<br>128<br>129<br>130<br>131<br>132<br>133<br>134<br>135<br>136<br>137<br>138<br>139<br>140<br>141<br>142<br>143<br>144<br>145<br>146<br>147<br>148<br>149<br></code></pre></td>
<td class="source"><pre><code><var>enum</var> tToken 
{
    PLUS, MINUS, MUL, DIV, LPAR, RPAR, NUMBER, END, ERROR
};

<cite>// Globale Variablen:</cite>
tToken aktToken;        <cite>// das zuletzt erkannte Token</cite>
<var>double</var> TokenZahlenWert; <cite>// der Wert bei Zahlenkonstanten</cite>

<var>char</var> *srcPos;           <cite>// Programm-Position</cite>

tToken sucheToken()
<cite>// Sucht ab der aktuellen Stringposition das nächste Token.</cite>
<cite>// Hier werden auch die Zahlenkonstanten bestimmt und in</cite>
<cite>// der globalen Variablen TokenZahlenWert abgelegt.</cite>
{
    aktToken = ERROR;
    <var>if</var> (*srcPos==0)
    {
        aktToken = END;
    } 
    <var>else</var> 
    {
        <var>switch</var> (*srcPos)
        {
            <var>case</var> <kbd>'('</kbd>: aktToken=LPAR;  <var>break</var>;
            <var>case</var> <kbd>')'</kbd>: aktToken=RPAR;  <var>break</var>;
            <var>case</var> <kbd>'*'</kbd>: aktToken=MUL;   <var>break</var>;
            <var>case</var> <kbd>'/'</kbd>: aktToken=DIV;   <var>break</var>;
            <var>case</var> <kbd>'+'</kbd>: aktToken=PLUS;  <var>break</var>;
            <var>case</var> <kbd>'-'</kbd>: aktToken=MINUS; <var>break</var>;
        }
        <var>if</var> (*srcPos&gt;=<kbd>'0'</kbd> &amp;&amp; *srcPos&lt;<kbd>'9'</kbd>) 
        {
            aktToken=NUMBER;
            TokenZahlenWert = 0.0;
        }
        <var>while</var> (*srcPos&gt;=<kbd>'0'</kbd> &amp;&amp; *srcPos&lt;<kbd>'9'</kbd>) 
        {
            TokenZahlenWert *= 10;
            TokenZahlenWert += *srcPos-<kbd>'0'</kbd>;
            srcPos++;
        }
        <var>if</var> (aktToken != NUMBER)
        {
            srcPos++;
        }
    }
    <var>return</var> aktToken;
}

tToken Error(<var>char</var> *s)
<cite>// Meldung ausgeben und Fehler-Token zurückliefern</cite>
{
    cerr &lt;&lt; s &lt;&lt; endl;
    <var>return</var> ERROR;
}

<var>double</var> PlusMinus(); <cite>// Prototyp</cite>

<var>double</var> Klammern()
<cite>// wertet Klammern, Zahlen und Vorzeichen aus</cite>
<cite>// ruft Klammern() und PlusMinus() dadurch rekursiv auf!</cite>
{
    <var>double</var> Wert;
    <var>switch</var>(aktToken)
    {
        <var>case</var> NUMBER:
            sucheToken();
            <var>return</var> TokenZahlenWert;
        <var>case</var> MINUS:
            sucheToken();
            <var>return</var> -Klammern();
        <var>case</var> LPAR:
            sucheToken();
            Wert = PlusMinus();
            <var>if</var> (aktToken != RPAR)
            {
               <var>return</var> Error(<kbd>") expected"</kbd>);
            {
            sucheToken();
            <var>return</var> Wert;
        <var>case</var> END:
            <var>return</var> 1;
    }
    <var>return</var> Error(<kbd>"primary expected"</kbd>);
}

<var>double</var> MulDiv()
<cite>// wertet Multiplikation und Division aus</cite>
<cite>// ruft Klammern() auf, dadurch rekursiv!</cite>
{
    <var>double</var> Wert;
    <cite>// rufe erst die Operation mit der nächsthöheren</cite>
    <cite>// Priorität auf</cite>
    Wert = Klammern();
    <var>while</var> (aktToken==MUL || aktToken==DIV)
    {
        <var>if</var> (aktToken==MUL)
        {
            sucheToken();
            Wert *= Klammern();
        }
        <var>else</var> <var>if</var> (aktToken==DIV)
        {
          sucheToken();
          Wert /= Klammern();
        }
    }
    <var>return</var> Wert;
}

<var>double</var> PlusMinus()
<cite>// wertet Summe und Differenz aus</cite>
<cite>// ruft MulDiv() auf, dadurch rekursiv</cite>
{
    <var>double</var> Wert;
    <cite>// rufe erst die Operation mit der nächsthöheren</cite>
    <cite>// Priorität auf</cite>
    Wert = MulDiv();
    <var>while</var> (aktToken==PLUS || aktToken==MINUS)
    {
        <var>if</var> (aktToken==PLUS)
        {
            sucheToken();
            Wert += MulDiv();
        }
        <var>else</var> <var>if</var> (aktToken==MINUS)
        {
            sucheToken();
            Wert -= MulDiv();
        }
    }
    <var>return</var> Wert;
}

<var>double</var> Auswertung(<var>char</var> *s)
{
    srcPos = s;
    sucheToken();      <cite>// bestimme das erste Token vorweg</cite>
    <var>return</var> PlusMinus();
}

<var>int</var> main(<var>int</var> argc, <var>char</var>* argv[])
{
    <var>double</var> Wert = Auswertung(argv[1]);
    cout &lt;&lt; Wert &lt;&lt; endl;
    <var>return</var> 0;
}</code></pre></td><td class="C_btnholder"></td></tr></table></div>
<br>
<br>
its in german, sorry for that :)<br>
<br>
It loops trough all token and looks what it is and then calls the needed function.<br>
<br>
<br>
<br>
Hope it helps <br>
<br>
wooden nose<br>

</div>
<div class="dhow">
<span class="sedited">Last edited on <span id="CH_zTm9d2c0e2ed4" title="Mon, 25 Feb 2008 20:40:54 +0000"></span><script type="text/javascript">WhenId('CH_zTm9d2c0e2ed4');</script><noscript>Feb 25, 2008 at 8:40pm UTC</noscript></span>
<span class="dbtn" id="CH_btn1654"></span>

</div>
</div>
</div>
<div class="C_forPost" id="msg2271"><span title="2271,9085,1023,19,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg2271" title="Link to this post"><img src="../../../img/link.png" width="16" height="8"></a> <span id="CH_zTmf1811dd35f" title="Sun, 09 Mar 2008 19:59:43 +0000"></span><script type="text/javascript">WhenId('CH_zTmf1811dd35f');</script><noscript>Mar 9, 2008 at 7:59pm UTC</noscript></div>
<div class="dwho"><a href="../../../user/ogranatw/default.htm"><b>ogranatw</b> (19)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i2271">
Thanks for your help, you've been vary helpful.
</div>
<div class="dhow">
<span class="dbtn" id="CH_btn2271"></span>

</div>
</div>
</div>
</div><div class="rootinsMore"></div><div class="rootbtnMore"></div><div class="rootinsNew"></div><div class="rootbtnNew"></div><div id="CH_insNew"></div><div id="CH_reply">Topic archived. No new replies allowed.</div><div id="CH_subscription"></div><div class="rootedtNew"></div><script type="text/javascript">new for_PostList(355,1,9085,0,'CH_PostList','CH_subscription','CH_reply','CH_insNew','CH_edttl','../../thread.cgi','../../post.cgi','../../myposts.cgi.htm',64,32,512,256,1024,16);</script></div>
<script type="text/javascript"><!--
google_ad_client = "ca-pub-7688470879129516";
google_ad_slot = "7973859818";
google_ad_width = 728;
google_ad_height = 90;
//-->
</script>
<acript type="text/javascript"
src="../../../../pagead2.googlesyndication.com/pagead/show_ads.js">
</script></div>
<div id="I_nav">
<div class="sect root">
<h3><b><a href="../../../default.htm">C++</a></b></h3>
<ul>
<li class="folder info"><a href="../../../info/default.htm">Information</a></li>
<li class="folder doc"><a href="../../../doc/default.htm">Tutorials</a></li>
<li class="folder reference"><a href="../../../reference/default.htm">Reference</a></li>
<li class="folder articles"><a href="../../../articles/default.htm">Articles</a></li>
<li class="folder selected forum"><a href="../../default.htm">Forum</a></li>
</ul>
</div>
<div class="sect">
<h3><b><a href="../../default.htm">Forum</a></b></h3>
<ul>
<li><a href="../../beginner/default.htm"><b>Beginners</b></a></li><li><a href="../../windows/default.htm"><b>Windows Programming</b></a></li><li><a href="../../unices/default.htm"><b>UNIX/Linux Programming</b></a></li><li class="selected"><a href="../default.htm"><b>General C++ Programming</b></a></li><li><a href="../../lounge/default.htm"><b>Lounge</b></a></li><li><a href="../../jobs/default.htm"><b>Jobs</b></a></li></ul>
</div>
<div id="I_subnav"></div>
<div class="C_ad234">
<script type="text/javascript"><!--
google_ad_client = "ca-pub-7688470879129516";
google_ad_slot = "7445514729";
google_ad_width = 234;
google_ad_height = 60;
//-->
</script>
<acript type="text/javascript"
src="../../../../pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</div></div>
<div id="I_midclear"></div>
</div>
</div>
<div id="I_bottom">
<div id="I_footer">
	<a href="../../../default.htm">Home page</a> | <a href="../../../privacy.do.htm">Privacy policy</a><br>&copy; cplusplus.com, 2000-2014 - All rights reserved - <i>v3.1</i><br><a href="../../../contact.doreferrerwww.cplusplus~456.com_">Spotted an error? contact us</a>
</div>
</div>

<script type="text/javascript">
<!--
function NavFor(us) {document.getElementById('I_subnav').innerHTML=us.ok?'<div class="sect"><h3><b><a href="../../../user/default.htm">'+us.user+'</a></b></h3><ul><li><a href="../../myposts.cgi.htm">My topics</a></li></ul></div>':'';}onSession(NavFor);ready();
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-521783-1']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? '../../../../httpsssl/default.htm' : '../../../../www/default.htm') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();

//-->
</script>

</body>
</html>