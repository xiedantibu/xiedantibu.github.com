<!DOCTYPE html><!-- saved from url=(0057)http://www.cplusplus.com/forum/general/113303/default.htm --><meta http-equiv="X-UA-Compatible" content="IE=Edge" />

<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>how to tell the compiler &quot;consider this  - C++ Forum</title>
<link rel="shortcut icon" type="image/x-icon" href="../../../favicon.ico">
<link rel="stylesheet" type="text/css" href="../../../v321/main.css">
<script src="../../../v321/main.js" type="text/javascript"></script>
</head>
<body>
<div id="I_top">
<div id="I_header">
<div id="I_logo"><a href="../../../default.htm" title="cplusplus.com"><div></div></a></div>
<div id="I_search">
<form id="search" action="/search.do" method="get">
Search: <input name="q" size="20" class="txt"> <input type="submit" value="Go" class="btn">
</form>
</div>
<div id="I_bar">
<ul>
<li><a href="../../default.htm">Forum</a></li>
<li><a href="../default.htm">General C++ Programming</a></li>
<li class="here">how to tell the compiler &quot;consider this </li>
</ul>
</div>
<div id="I_user" class="C_LoginBox"><span title="ajax"></span></div>
</div>
</div>
<div id="I_mid">
<div id="I_wrap">
<div id="I_minheight"></div>
<div id="I_main">
<div class="C_support"><script type="text/javascript"><!--
if (!cookieGet("hspt31")) {
  document.write('<div class="C_DonateBox"></div>');
}
//-->
</script><div class="C_ad728"><script type="text/javascript"><!--
google_ad_client = "ca-pub-7688470879129516";
google_ad_slot = "7973859818";
google_ad_width = 728;
google_ad_height = 90;
//-->
</script>
<acript type="text/javascript"
src="../../../../pagead2.googlesyndication.com/pagead/show_ads.js">
</script></div><div class="C_supportbottom"></div></div><div id="I_content">
<h3><div class="C_ico default" title="post">&nbsp;</div> how to tell the compiler &quot;consider this to be the derived class X&quot;</h3><span id="CH_edttl"></span><span class="rootdatPost" title="113303,root,0,-1,6,0"></span><div id="CH_PostList"><div class="C_forPost" id="msg619076"><span title="619076,105234,1023,13,1"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg619076" title="Link to this post"><img src="../../../img/link.png" width="16" height="8"></a> <span id="CH_zTm8fbcbdf5d4" title="Sat, 12 Oct 2013 07:21:43 +0000"></span><script type="text/javascript">WhenId('CH_zTm8fbcbdf5d4');</script><noscript>Oct 12, 2013 at 7:21am UTC</noscript></div>
<div class="dwho"><a href="../../../user/bostjanv/default.htm"><b>bostjanv</b> (13)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i619076">
Hello,<br>
I have an example where I have a variable belonging to a base class, but I would like to tell the compiler that it actually belongs to a derived class. How can I do this?<br>
Regards,<br>
bostjanv<br>
<br>
<div class="auto"><table class="snippet"><tr><td class="rownum"><pre><code>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br></code></pre></td>
<td class="source"><pre><code><cite>// base class: R0</cite>
<cite>// derived class: R1</cite>
<cite>// see function SetR1 for the problem</cite>
<var>class</var> R0 {
<var>public</var>:
  <var>int</var> a;
};
<var>class</var> R1: <var>public</var> R0 {
<var>public</var>:
  <var>int</var> b;
};
<var>void</var> Set(R0 &amp;r,<var>int</var> a) {
  r.a = a;
} <cite>// Set</cite>
<var>void</var> SetR1(R0 &amp;r,<var>int</var> b) {
  <cite>//  (R1)r.b = b;  // THIS DOES NOT WORK</cite>
} <cite>// SetR1</cite>

R0 r0; R1 r1;

<var>int</var> main(<var>int</var> argc, <var>char</var> *argv[]) {
  Set(r1,22); SetR1(r1,23);
}</code></pre></td><td class="C_btnholder"></td></tr></table></div>

</div>
<div class="dhow">
<span class="dbtn" id="CH_btn619076"></span>

</div>
</div>
</div>
<div class="C_forPost" id="msg619086"><span title="619086,104557,1023,819,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg619086" title="Link to this post"><img src="../../../img/link.png" width="16" height="8"></a> <span id="CH_zTm2a2250bddf" title="Sat, 12 Oct 2013 07:36:04 +0000"></span><script type="text/javascript">WhenId('CH_zTm2a2250bddf');</script><noscript>Oct 12, 2013 at 7:36am UTC</noscript></div>
<div class="dwho"><a href="../../../user/abhishekm71/default.htm"><b>abhishekm71</b> (819)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i619086">
When the member variable b is only specific to class R1, why do you need to declare function input variable of class R0?<br>
<br>
Class R0 does not know anything about class R1 so it does not recognize the variable r.b.
</div>
<div class="dhow">
<span class="dbtn" id="CH_btn619086"></span>

</div>
</div>
</div>
<div class="C_forPost" id="msg619103"><span title="619103,105234,1023,13,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg619103" title="Link to this post"><img src="../../../img/link.png" width="16" height="8"></a> <span id="CH_zTmabee737350" title="Sat, 12 Oct 2013 09:40:21 +0000"></span><script type="text/javascript">WhenId('CH_zTmabee737350');</script><noscript>Oct 12, 2013 at 9:40am UTC</noscript></div>
<div class="dwho"><a href="../../../user/bostjanv/default.htm"><b>bostjanv</b> (13)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i619103">
Hello,<br>
Thanks for the reply. The situation is the following:<br>
<br>
I'm trying to translate some software from a language where this is quite legitimate (Oberon-2). For example, one can declare a variable of a base class type and assign to it a value of a derived class type. Later, one can take the base class variable and say "assume the actual type is the derived class" and access the derived class components. I'm trying to figure out if there is way to perform something like that in C++.<br>
Regards,<br>
bostjanv
</div>
<div class="dhow">
<span class="dbtn" id="CH_btn619103"></span>

</div>
</div>
</div>
<div class="C_forPost" id="msg619109"><span title="619109,104557,1023,819,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg619109" title="Link to this post"><img src="../../../img/link.png" width="16" height="8"></a> <span id="CH_zTmf6cda482c5" title="Sat, 12 Oct 2013 09:55:46 +0000"></span><script type="text/javascript">WhenId('CH_zTmf6cda482c5');</script><noscript>Oct 12, 2013 at 9:55am UTC</noscript></div>
<div class="dwho"><a href="../../../user/abhishekm71/default.htm"><b>abhishekm71</b> (819)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i619109">
AFAIK the following is possible in C++:<br>
<br>
<div class="auto"><table class="snippet"><tr><td class="rownum"><pre><code>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br></code></pre></td>
<td class="source"><pre><code><var>void</var> Set(R0 &amp;r,<var>int</var> b) {
   r.a = a;  <cite>// accessing base class variable </cite>
} 

R1 r1;

<var>int</var> main(<var>int</var> argc, <var>char</var> *argv[]) {
  Set(r1,22);
}</code></pre></td><td class="C_btnholder"></td></tr></table></div>
<br>
<br>
This is because, the references and pointers to derived class objects are type compatible with base class objects.<br>
<br>
However, following is not possible:<br>
<div class="auto"><table class="snippet"><tr><td class="rownum"><pre><code>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br></code></pre></td>
<td class="source"><pre><code><var>void</var> SetR1(R0 &amp;r,<var>int</var> b) {
   r.b = b;  <cite>// base class reference variable trying to access derived class member function. </cite>
} 

R1 r1;

<var>int</var> main(<var>int</var> argc, <var>char</var> *argv[]) {
  SetR1(r1,22);
}</code></pre></td><td class="C_btnholder"></td></tr></table></div>
<br>
<br>
This is because, although the same references are used, the function tries to access member variable specific to R1 class. Hence compiler shall complain that the function's input parameter cannot be of R0 class. It does not know that you shall later try to access it through R1 class object.
</div>
<div class="dhow">
<span class="dbtn" id="CH_btn619109"></span>

</div>
</div>
</div>
<div class="C_forPost" id="msg619112"><span title="619112,17129,1023,7248,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg619112" title="Link to this post"><img src="../../../img/link.png" width="16" height="8"></a> <span id="CH_zTm334ad5b6a3" title="Sat, 12 Oct 2013 10:04:46 +0000"></span><script type="text/javascript">WhenId('CH_zTm334ad5b6a3');</script><noscript>Oct 12, 2013 at 10:04am UTC</noscript></div>
<div class="dwho"><a href="../../../user/kbw/default.htm"><b>kbw</b> (7248)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i619112">
If you want to override the type system and do an unsafe downcast, you do this.<div class="auto"><table class="snippet"><tr><td class="rownum"><pre><code>1<br>2<br>3<br>4<br></code></pre></td>
<td class="source"><pre><code><var>void</var> SetR1(R0&amp; r, <var>int</var> b)
{
    <var>static_cast</var>&lt;R1*&gt;(&amp;r)-&gt;b = b;
}</code></pre></td><td class="C_btnholder"></td></tr></table></div>

</div>
<div class="dhow">
<span class="dbtn" id="CH_btn619112"></span>

</div>
</div>
</div>
<div class="C_forPost" id="msg619120"><span title="619120,105234,1023,13,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg619120" title="Link to this post"><img src="../../../img/link.png" width="16" height="8"></a> <span id="CH_zTm06f220d7d6" title="Sat, 12 Oct 2013 10:37:52 +0000"></span><script type="text/javascript">WhenId('CH_zTm06f220d7d6');</script><noscript>Oct 12, 2013 at 10:37am UTC</noscript></div>
<div class="dwho"><a href="../../../user/bostjanv/default.htm"><b>bostjanv</b> (13)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i619120">
I tried the method proposed by kbw and it worked. I think I can live with the "unsafe" caveat since the point of this is to say to the compiler "I know what I'm doing; don't complain". I only hope I won't run into some nasty surprises.<br>
Regards, bostjanv
</div>
<div class="dhow">
<span class="dbtn" id="CH_btn619120"></span>

</div>
</div>
</div>
</div><div class="rootinsMore"></div><div class="rootbtnMore"></div><div class="rootinsNew"></div><div class="rootbtnNew"></div><div id="CH_insNew"></div><div id="CH_reply">Topic archived. No new replies allowed.</div><div id="CH_subscription"></div><div class="rootedtNew"></div><script type="text/javascript">new for_PostList(113303,1,105234,0,'CH_PostList','CH_subscription','CH_reply','CH_insNew','CH_edttl','../../thread.cgi','../../post.cgi','../../myposts.cgi.htm',64,32,512,256,1024,16);</script></div>
</div>
<div id="I_nav">
<div class="sect root">
<h3><b><a href="../../../default.htm">C++</a></b></h3>
<ul>
<li class="folder info"><a href="../../../info/default.htm">Information</a></li>
<li class="folder doc"><a href="../../../doc/default.htm">Tutorials</a></li>
<li class="folder reference"><a href="../../../reference/default.htm">Reference</a></li>
<li class="folder articles"><a href="../../../articles/default.htm">Articles</a></li>
<li class="folder selected forum"><a href="../../default.htm">Forum</a></li>
</ul>
</div>
<div class="sect">
<h3><b><a href="../../default.htm">Forum</a></b></h3>
<ul>
<li><a href="../../beginner/default.htm"><b>Beginners</b></a></li><li><a href="../../windows/default.htm"><b>Windows Programming</b></a></li><li><a href="../../unices/default.htm"><b>UNIX/Linux Programming</b></a></li><li class="selected"><a href="../default.htm"><b>General C++ Programming</b></a></li><li><a href="../../lounge/default.htm"><b>Lounge</b></a></li><li><a href="../../jobs/default.htm"><b>Jobs</b></a></li></ul>
</div>
<div id="I_subnav"></div>
<div class="C_ad234">
<script type="text/javascript"><!--
google_ad_client = "ca-pub-7688470879129516";
google_ad_slot = "7445514729";
google_ad_width = 234;
google_ad_height = 60;
//-->
</script>
<acript type="text/javascript"
src="../../../../pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</div></div>
<div id="I_midclear"></div>
</div>
</div>
<div id="I_bottom">
<div id="I_footer">
	<a href="../../../default.htm">Home page</a> | <a href="../../../privacy.do.htm">Privacy policy</a><br>&copy; cplusplus.com, 2000-2014 - All rights reserved - <i>v3.1</i><br><a href="../../../contact.doreferrerwww.cplusplus~372.com_">Spotted an error? contact us</a>
</div>
</div>

<script type="text/javascript">
<!--
function NavFor(us) {document.getElementById('I_subnav').innerHTML=us.ok?'<div class="sect"><h3><b><a href="../../../user/default.htm">'+us.user+'</a></b></h3><ul><li><a href="../../myposts.cgi.htm">My topics</a></li></ul></div>':'';}onSession(NavFor);ready();
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-521783-1']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? '../../../../httpsssl/default.htm' : '../../../../www/default.htm') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();

//-->
</script>

</body>
</html>