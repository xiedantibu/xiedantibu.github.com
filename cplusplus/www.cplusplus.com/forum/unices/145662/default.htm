<!DOCTYPE html><!-- saved from url=(0056)http://www.cplusplus.com/forum/unices/145662/default.htm --><meta http-equiv="X-UA-Compatible" content="IE=Edge" />

<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Farey Sequence Program. - C++ Forum</title>
<link rel="shortcut icon" type="image/x-icon" href="../../../favicon.ico">
<link rel="stylesheet" type="text/css" href="../../../v321/main.css">
<script src="../../../v321/main.js" type="text/javascript"></script>
</head>
<body>
<div id="I_top">
<div id="I_header">
<div id="I_logo"><a href="../../../default.htm" title="cplusplus.com"><div></div></a></div>
<div id="I_search">
<form id="search" action="/search.do" method="get">
Search: <input name="q" size="20" class="txt"> <input type="submit" value="Go" class="btn">
</form>
</div>
<div id="I_bar">
<ul>
<li><a href="../../default.htm">Forum</a></li>
<li><a href="../default.htm">UNIX/Linux Programming</a></li>
<li class="here">Farey Sequence Program.</li>
</ul>
</div>
<div id="I_user" class="C_LoginBox"><span title="ajax"></span></div>
</div>
</div>
<div id="I_mid">
<div id="I_wrap">
<div id="I_minheight"></div>
<div id="I_main">
<div class="C_support"><script type="text/javascript"><!--
if (!cookieGet("hspt31")) {
  document.write('<div class="C_DonateBox"></div>');
}
//-->
</script><div class="C_ad728"><script type="text/javascript"><!--
google_ad_client = "ca-pub-7688470879129516";
google_ad_slot = "7973859818";
google_ad_width = 728;
google_ad_height = 90;
//-->
</script>
<acript type="text/javascript"
src="../../../../pagead2.googlesyndication.com/pagead/show_ads.js">
</script></div><div class="C_supportbottom"></div></div><div id="I_content">
<h3><div class="C_ico default" title="post">&nbsp;</div> Farey Sequence Program.</h3><span id="CH_edttl"></span><span class="rootdatPost" title="145662,root,0,-1,8,0"></span><div id="CH_PostList"><div class="C_forPost" id="msg766817"><span title="766817,155233,255,4,1"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg766817" title="Link to this post"><img src="../../../img/link.png" width="16" height="8"></a> <span id="CH_zTm42f9235c75" title="Wed, 22 Oct 2014 17:21:25 +0000"></span><script type="text/javascript">WhenId('CH_zTm42f9235c75');</script><noscript>Oct 22, 2014 at 5:21pm UTC</noscript></div>
<div class="dwho"><a href="../../../user/minusila/default.htm"><b>minusila</b> (4)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i766817">
I'm having problems getting this to work correctly and when I try to run it from the command line I get a Segmentation error. This program is for approximating the number using Farey Sequence. At the end of the loop the output needs to be in fraction form, the restrictions are for the loop to stop when either the <br>
mediant denominator is larger than 1,000,000 or when the mediant is within 10-6<br>
of x. Also the program should read the value of x from the command line, rather than prompting for it. <br>
<div class="auto"><table class="snippet"><tr><td class="rownum"><pre><code>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>30<br>31<br>32<br>33<br>34<br>35<br>36<br>37<br>38<br>39<br>40<br>41<br>42<br>43<br>44<br>45<br>46<br></code></pre></td>
<td class="source"><pre><code><dfn>#include &lt;iostream&gt;</dfn>
<dfn>#include &lt;cmath&gt;</dfn>
<dfn>#include &lt;cstdlib&gt;</dfn>

<var>using</var> <var>namespace</var> std;

<var>const</var> <var>double</var> TOL=1E-6;

<var>int</var> main(<var>int</var> argc,<var>char</var> *argv[])  {
  <var>int</var> a=0, b=1, c=1, d=0;    	    <cite>//establishing endpoints</cite>
  <var>double</var> x;                            <cite>//the real number</cite>
  <var>int</var> mn = a + c;                    <cite>//mediant numerator</cite>
  <var>int</var> md = b + d;                    <cite>//mediant denom</cite>
  <var>int</var> med = mn/md;                    <cite>//mediant whole</cite>

  x = atof(argv[1]);


<cite>//1.compute mediant of endpoints</cite>
  <var>while</var> ( fabs(mn-x*md) &gt;= md*TOL || md&lt;1000000 )
  {

<cite>//2.determine whether x is &gt; or &lt; mediant</cite>
  <cite>//2.1 IF x larger than med, replace smaller endpoint with mediant</cite>

    <var>if</var>(med &lt; x)
    {
    mn = a;
    md = b;
    }

    <cite>//2.2 IF larger than med, replace smaller endpoint with mediant</cite>
    <var>else</var>
    {
        mn = c;
        md = d;
    }
  }

<cite>//4. output last mediant</cite>
cout &lt;&lt; mn &lt;&lt; <kbd>"/"</kbd> &lt;&lt; md &lt;&lt; endl;


<var>return</var> 0;
}
</code></pre></td><td class="C_btnholder"></td></tr></table></div>

</div>
<div class="dhow">
<span class="sedited">Last edited on <span id="CH_zTm589959039e" title="Fri, 24 Oct 2014 03:20:10 +0000"></span><script type="text/javascript">WhenId('CH_zTm589959039e');</script><noscript>Oct 24, 2014 at 3:20am UTC</noscript></span>
<span class="dbtn" id="CH_btn766817"></span>

</div>
</div>
</div>
<div class="C_forPost" id="msg767008"><span title="767008,21217,1023,459,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg767008" title="Link to this post"><img src="../../../img/link.png" width="16" height="8"></a> <span id="CH_zTm3b3463046e" title="Thu, 23 Oct 2014 01:56:15 +0000"></span><script type="text/javascript">WhenId('CH_zTm3b3463046e');</script><noscript>Oct 23, 2014 at 1:56am UTC</noscript></div>
<div class="dwho"><a href="../../../user/kemort/default.htm"><b>kemort</b> (459)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i767008">
Try:<br>
<br>
<span class="auto"><code class="source"><var>double</var> x = 0;</code></span><br>
<br>
<div class="auto"><table class="snippet"><tr><td class="rownum"><pre><code>1<br>2<br></code></pre></td>
<td class="source"><pre><code><var>if</var>( argc == 2)
		x = atof(argv[1]);</code></pre></td><td class="C_btnholder"></td></tr></table></div>
<br>
<br>
The reason is argv[1] is otherwise out of range given the way you are programming reading argv[]. Normally it is done with a loop based on the value of argc.
</div>
<div class="dhow">
<span class="dbtn" id="CH_btn767008"></span>

</div>
</div>
</div>
<div class="C_forPost" id="msg767254"><span title="767254,155233,255,4,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg767254" title="Link to this post"><img src="../../../img/link.png" width="16" height="8"></a> <span id="CH_zTm34a3e75e27" title="Thu, 23 Oct 2014 18:12:58 +0000"></span><script type="text/javascript">WhenId('CH_zTm34a3e75e27');</script><noscript>Oct 23, 2014 at 6:12pm UTC</noscript></div>
<div class="dwho"><a href="../../../user/minusila/default.htm"><b>minusila</b> (4)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i767254">
where should i put this if loop?
</div>
<div class="dhow">
<span class="dbtn" id="CH_btn767254"></span>

</div>
</div>
</div>
<div class="C_forPost" id="msg767275"><span title="767275,155233,255,4,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg767275" title="Link to this post"><img src="../../../img/link.png" width="16" height="8"></a> <span id="CH_zTmf108144863" title="Thu, 23 Oct 2014 18:42:40 +0000"></span><script type="text/javascript">WhenId('CH_zTmf108144863');</script><noscript>Oct 23, 2014 at 6:42pm UTC</noscript></div>
<div class="dwho"><a href="../../../user/minusila/default.htm"><b>minusila</b> (4)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i767275">
also i want my x value to be inputed directly from the command line (i am compiling and running this on ubuntu). I am unsure how to do this. <br>
<br>
When I try:<br>
<span class="auto"><code class="source">./a.out 0.324235345</code></span><br>
            ^some random value<br>
<br>
into the command line nothing happens. I have to close out the terminal completely in order to type any new commands. What's happening to my cout? Why does no value for my mn/md appear?
</div>
<div class="dhow">
<span class="sedited">Last edited on <span id="CH_zTm23f217bde8" title="Fri, 24 Oct 2014 03:20:36 +0000"></span><script type="text/javascript">WhenId('CH_zTm23f217bde8');</script><noscript>Oct 24, 2014 at 3:20am UTC</noscript></span>
<span class="dbtn" id="CH_btn767275"></span>

</div>
</div>
</div>
<div class="C_forPost" id="msg767284"><span title="767284,21217,1023,459,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg767284" title="Link to this post"><img src="../../../img/link.png" width="16" height="8"></a> <span id="CH_zTmb3f765c769" title="Thu, 23 Oct 2014 19:16:27 +0000"></span><script type="text/javascript">WhenId('CH_zTmb3f765c769');</script><noscript>Oct 23, 2014 at 7:16pm UTC</noscript></div>
<div class="dwho"><a href="../../../user/kemort/default.htm"><b>kemort</b> (459)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i767284">
The if statement goes just before the x = ... statement
</div>
<div class="dhow">
<span class="dbtn" id="CH_btn767284"></span>

</div>
</div>
</div>
<div class="C_forPost" id="msg767301"><span title="767301,21217,1023,459,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg767301" title="Link to this post"><img src="../../../img/link.png" width="16" height="8"></a> <span id="CH_zTm8e484b543b" title="Thu, 23 Oct 2014 19:59:39 +0000"></span><script type="text/javascript">WhenId('CH_zTm8e484b543b');</script><noscript>Oct 23, 2014 at 7:59pm UTC</noscript></div>
<div class="dwho"><a href="../../../user/kemort/default.htm"><b>kemort</b> (459)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i767301">
<a href="../../../../stackoverflow.com/questions/3024197/what-does-int-argc-char-argv-mean">http://stackoverflow.com/questions/3024197/what-does-int-argc-char-argv-mean</a>
</div>
<div class="dhow">
<span class="dbtn" id="CH_btn767301"></span>

</div>
</div>
</div>
<div class="C_forPost" id="msg767429"><span title="767429,155233,255,4,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg767429" title="Link to this post"><img src="../../../img/link.png" width="16" height="8"></a> <span id="CH_zTm4878a4e392" title="Fri, 24 Oct 2014 05:56:45 +0000"></span><script type="text/javascript">WhenId('CH_zTm4878a4e392');</script><noscript>Oct 24, 2014 at 5:56am UTC</noscript></div>
<div class="dwho"><a href="../../../user/minusila/default.htm"><b>minusila</b> (4)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i767429">
ok. so i got it to work. It didn't have anything to do with x, and that is all working properly as is (I tried both with and without it). However, the problem now seems to be that the while loop isn't listening to my conditions. The only way I can get correct results is if I use || but i want the program to adhere to BOTH conditions (but I don't get acurate results with &amp;&amp;). Any ideas?<br>
<br>
<div class="auto"><table class="snippet"><tr><td class="rownum"><pre><code>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>30<br>31<br>32<br>33<br>34<br>35<br>36<br>37<br>38<br>39<br>40<br>41<br>42<br>43<br>44<br>45<br>46<br>47<br>48<br>49<br>50<br>51<br>52<br>53<br>54<br></code></pre></td>
<td class="source"><pre><code><dfn>#include &lt;iostream&gt;</dfn>
<dfn>#include &lt;cmath&gt;</dfn>
<dfn>#include &lt;cstdlib&gt;</dfn>

<var>using</var> <var>namespace</var> std;

<var>const</var> <var>double</var> TOL=1e-6;

  <var>int</var> main(<var>int</var> argc,<var>char</var> *argv[]) {
  <var>int</var> a=0, b=1, c=1, d=0; 	<cite>//establishing endpoints</cite>
  <var>double</var> x = atof(argv[1]);	<cite>//the real number</cite>
  <var>int</var> mn, md; 			<cite>//mediant</cite>


<cite>//1.compute mediant of endpoints</cite>
  <var>while</var> ( md&lt;1000000 || fabs(x*md-mn) &lt;= TOL*md  )
  {

  mn=a+c;
  md=b+d;


<cite>//2.determine whether x is &gt; or &lt; mediant</cite>

	<cite>//2.1 IF x smaller than med, replace larger endpoint with mediant</cite>


	<var>if</var>(x*md &lt; mn)
	{
	c = mn;
	d = md;
	}

	<cite>//2.2 IF larger than med, replace smaller endpoint with mediant</cite>
	

	<var>else</var> <var>if</var> (x*md &gt; mn) 
	{
	a = mn;
	b = md;
	}

	<var>else</var>
	<var>break</var>;

  }

<cite>//4. output last mediant</cite>
 
  cout &lt;&lt; mn &lt;&lt; <kbd>"/"</kbd> &lt;&lt; md &lt;&lt; endl;


  <var>return</var> 0;
  }</code></pre></td><td class="C_btnholder"></td></tr></table></div>

</div>
<div class="dhow">
<span class="dbtn" id="CH_btn767429"></span>

</div>
</div>
</div>
<div class="C_forPost" id="msg767496"><span title="767496,111189,1023,3222,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="#msg767496" title="Link to this post"><img src="../../../img/link.png" width="16" height="8"></a> <span id="CH_zTm3646f49b6b" title="Fri, 24 Oct 2014 10:31:55 +0000"></span><script type="text/javascript">WhenId('CH_zTm3646f49b6b');</script><noscript>Oct 24, 2014 at 10:31am UTC</noscript></div>
<div class="dwho"><a href="../../../user/keskiverto/default.htm"><b>keskiverto</b> (3222)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i767496">
Are you sure that the logic is correct for that "Farey Sequence"?<br>

</div>
<div class="dhow">
<span class="dbtn" id="CH_btn767496"></span>

</div>
</div>
</div>
</div><div class="rootinsMore"></div><div class="rootbtnMore"></div><div class="rootinsNew"></div><div class="rootbtnNew"></div><div id="CH_insNew"></div><div id="CH_reply">Registered users can post here. <a href="../../../user/default.htm">Sign in or register</a> to post.</div><div id="CH_subscription"></div><div class="rootedtNew"></div><script type="text/javascript">new for_PostList(145662,0,155233,0,'CH_PostList','CH_subscription','CH_reply','CH_insNew','CH_edttl','../../thread.cgi','../../post.cgi','../../myposts.cgi.htm',64,32,512,256,1024,16);</script></div>
<script type="text/javascript"><!--
google_ad_client = "ca-pub-7688470879129516";
google_ad_slot = "7973859818";
google_ad_width = 728;
google_ad_height = 90;
//-->
</script>
<acript type="text/javascript"
src="../../../../pagead2.googlesyndication.com/pagead/show_ads.js">
</script></div>
<div id="I_nav">
<div class="sect root">
<h3><b><a href="../../../default.htm">C++</a></b></h3>
<ul>
<li class="folder info"><a href="../../../info/default.htm">Information</a></li>
<li class="folder doc"><a href="../../../doc/default.htm">Tutorials</a></li>
<li class="folder reference"><a href="../../../reference/default.htm">Reference</a></li>
<li class="folder articles"><a href="../../../articles/default.htm">Articles</a></li>
<li class="folder selected forum"><a href="../../default.htm">Forum</a></li>
</ul>
</div>
<div class="sect">
<h3><b><a href="../../default.htm">Forum</a></b></h3>
<ul>
<li><a href="../../beginner/default.htm"><b>Beginners</b></a></li><li><a href="../../windows/default.htm"><b>Windows Programming</b></a></li><li class="selected"><a href="../default.htm"><b>UNIX/Linux Programming</b></a></li><li><a href="../../general/default.htm"><b>General C++ Programming</b></a></li><li><a href="../../lounge/default.htm"><b>Lounge</b></a></li><li><a href="../../jobs/default.htm"><b>Jobs</b></a></li></ul>
</div>
<div id="I_subnav"></div>
<div class="C_ad234">
<script type="text/javascript"><!--
google_ad_client = "ca-pub-7688470879129516";
google_ad_slot = "7445514729";
google_ad_width = 234;
google_ad_height = 60;
//-->
</script>
<acript type="text/javascript"
src="../../../../pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</div></div>
<div id="I_midclear"></div>
</div>
</div>
<div id="I_bottom">
<div id="I_footer">
	<a href="../../../default.htm">Home page</a> | <a href="../../../privacy.do.htm">Privacy policy</a><br>&copy; cplusplus.com, 2000-2014 - All rights reserved - <i>v3.1</i><br><a href="../../../contact.doreferrerwww.cplusplus.com_252fforum_252fu~11.htm">Spotted an error? contact us</a>
</div>
</div>

<script type="text/javascript">
<!--
function NavFor(us) {document.getElementById('I_subnav').innerHTML=us.ok?'<div class="sect"><h3><b><a href="../../../user/default.htm">'+us.user+'</a></b></h3><ul><li><a href="../../myposts.cgi.htm">My topics</a></li></ul></div>':'';}onSession(NavFor);ready();
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-521783-1']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? '../../../../httpsssl/default.htm' : '../../../../www/default.htm') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();

//-->
</script>

</body>
</html>